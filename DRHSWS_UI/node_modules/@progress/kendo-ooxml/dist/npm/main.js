'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var JSZip = _interopDefault(require('jszip/dist/jszip'));

var current = {
    compile: function(template) {
        return template;
    }
};

var TemplateService = function TemplateService () {};

TemplateService.register = function register (userImplementation) {
    current = userImplementation;
};

TemplateService.compile = function compile (template) {
    return current.compile(template);
};

var FIELD_REGEX = /\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;
var getterCache = {};
var UNDEFINED = 'undefined';

getterCache[UNDEFINED] = function(obj) {
    return obj;
};

function getter(field) {
    if (getterCache[field]) {
        return getterCache[field];
    }

    var fields = [];
    field.replace(FIELD_REGEX, function(match, index, indexAccessor, field) {
        fields.push(typeof index !== UNDEFINED ? index : (indexAccessor || field));
    });

    getterCache[field] = function(obj) {
        var result = obj;
        for (var idx = 0; idx < fields.length && result; idx++) {
            result = result[fields[idx]];
        }

        return result;
    };

    return getterCache[field];
}

function map(array, func) {
    return array.reduce(function (result, el, i) {
        var val = func(el, i);
        if (val != null) {
            result.push(val);
        }
        return result;
    }, []);
}

function defaultGroupHeaderTemplate(data) {
    return ((data.title) + ": " + (data.value));
}

function createArray(length, callback) {
    var result = [];

    for (var idx = 0; idx < length; idx++) {
        result.push(callback(idx));
    }

    return result;
}

var ExcelExporter = function ExcelExporter(options) {
    options.columns = this._trimColumns(options.columns || []);

    this.allColumns = map(this._leafColumns(options.columns || []), this._prepareColumn);

    this.columns = this.allColumns.filter(function(column) { return !column.hidden; });

    this.options = options;
    this.data = options.data || [];
    this.aggregates = options.aggregates || {};
    this.groups = [].concat(options.groups || []);
    this.hierarchy = options.hierarchy;
};

ExcelExporter.prototype.workbook = function workbook () {
    var workbook = {
        sheets: [ {
            columns: this._columns(),
            rows: this.hierarchy ? this._hierarchyRows() : this._rows(),
            freezePane: this._freezePane(),
            filter: this._filter()
        } ]
    };

    return workbook;
};

ExcelExporter.prototype._trimColumns = function _trimColumns (columns) {
        var this$1 = this;

    return columns.filter(function (column) {
        var result = Boolean(column.field);

        if (!result && column.columns) {
            result = this$1._trimColumns(column.columns).length > 0;
        }

        return result;
    });
};

ExcelExporter.prototype._leafColumns = function _leafColumns (columns) {
        var this$1 = this;

    var result = [];

    for (var idx = 0; idx < columns.length; idx++) {
        if (!columns[idx].columns) {
            result.push(columns[idx]);
        } else {
            result = result.concat(this$1._leafColumns(columns[idx].columns));
        }
    }

    return result;
};

ExcelExporter.prototype._prepareColumn = function _prepareColumn (column) {
    if (!column.field) {
        return null;
    }

    var value = function(dataItem) {
        return getter(column.field, true)(dataItem);
    };

    var values = null;

    if (column.values) {
        values = {};

        column.values.forEach(function(item) {
            values[item.value] = item.text;
        });

        value = function(dataItem) {
            return values[getter(column.field, true)(dataItem)];
        };
    }

    return Object.assign({}, column, {
        value: value,
        values: values,
        groupHeaderTemplate: column.groupHeaderTemplate ? TemplateService.compile(column.groupHeaderTemplate) : defaultGroupHeaderTemplate,
        groupFooterTemplate: column.groupFooterTemplate ? TemplateService.compile(column.groupFooterTemplate) : null,
        footerTemplate: column.footerTemplate ? TemplateService.compile(column.footerTemplate) : null
    });
};

ExcelExporter.prototype._filter = function _filter () {
    if (!this.options.filterable) {
        return null;
    }

    var depth = this._depth();

    return {
        from: depth,
        to: depth + this.columns.length - 1
    };
};

ExcelExporter.prototype._createPaddingCells = function _createPaddingCells (length) {
        var this$1 = this;

    return createArray(length, function () { return Object.assign({
        background: "#dfdfdf",
        color: "#333"
    }, this$1.options.paddingCellOptions); });
};

ExcelExporter.prototype._dataRow = function _dataRow (dataItem, level, depth) {
        var this$1 = this;

    var cells = this._createPaddingCells(level);

    // grouped
    if (depth && dataItem.items) {
        var column = this.allColumns.filter(function(column) {
            return column.field === dataItem.field;
        })[0];

        var title = column && column.title ? column.title : dataItem.field;
        var template = column ? column.groupHeaderTemplate : null;
        var group = Object.assign({
            title: title,
            field: dataItem.field,
            value: column && column.values ? column.values[dataItem.value] : dataItem.value,
            aggregates: dataItem.aggregates,
            items: dataItem.items
        }, dataItem.aggregates[dataItem.field]);

        var value = title + ": " + (dataItem.value);

        if (template) {
            value = template(group);
        }

        cells.push(Object.assign({
            value: value,
            background: "#dfdfdf",
            color: "#333",
            colSpan: this.columns.length + depth - level
        }, (column || {}).groupHeaderCellOptions));

        var rows = this._dataRows(dataItem.items, level + 1);

        rows.unshift({
            type: "group-header",
            cells: cells
        });

        return rows.concat(this._footer(dataItem));
    }

    var dataCells = [];

    for (var cellIdx = 0; cellIdx < this.columns.length; cellIdx++) {
        dataCells[cellIdx] = this$1._cell(dataItem, this$1.columns[cellIdx]);
    }

    if (this.hierarchy) {
        dataCells[0].colSpan = depth - level + 1;
    }

    return [ {
        type: "data",
        cells: cells.concat(dataCells)
    } ];
};

ExcelExporter.prototype._dataRows = function _dataRows (dataItems, level) {
        var this$1 = this;

    var depth = this._depth();
    var rows = [];

    for (var idx = 0; idx < dataItems.length; idx++) {
        rows.push.apply(rows, this$1._dataRow(dataItems[idx], level, depth));
    }

    return rows;
};

ExcelExporter.prototype._hierarchyRows = function _hierarchyRows () {
        var this$1 = this;

    var depth = this._depth();
    var data = this.data;
    var itemLevel = this.hierarchy.itemLevel;
    var hasFooter = this._hasFooterTemplate();
    var rows = [];
    var parents = [];
    var previousLevel = 0;
    var previousItemId;

    for (var idx = 0; idx < data.length; idx++) {
        var item = data[idx];
        var level = itemLevel(item);

        if (hasFooter) {
            if (level > previousLevel) {
                parents.push({ id: previousItemId, level: previousLevel });
            } else if (level < previousLevel) {
                rows.push.apply(rows, this$1._hierarchyFooterRows(parents, level, depth));
            }

            previousLevel = level;
            previousItemId = item.id;
        }

        rows.push.apply(rows, this$1._dataRow(item, level + 1, depth));
    }

    if (hasFooter) {
        rows.push.apply(rows, this._hierarchyFooterRows(parents, 0, depth));

        var rootAggregate = data.length ? this.aggregates[data[0].parentId] : {};
        rows.push(this._hierarchyFooter(rootAggregate, 0, depth));
    }

    this._prependHeaderRows(rows);

    return rows;
};

ExcelExporter.prototype._hierarchyFooterRows = function _hierarchyFooterRows (parents, currentLevel, depth) {
        var this$1 = this;

    var rows = [];
    while (parents.length && parents[parents.length - 1].level >= currentLevel) {
        var parent = parents.pop();
        rows.push(this$1._hierarchyFooter(this$1.aggregates[parent.id], parent.level + 1, depth));
    }

    return rows;
};

ExcelExporter.prototype._hasFooterTemplate = function _hasFooterTemplate () {
    var columns = this.columns;
    for (var idx = 0; idx < columns.length; idx++) {
        if (columns[idx].footerTemplate) {
            return true;
        }
    }
};

ExcelExporter.prototype._hierarchyFooter = function _hierarchyFooter (aggregates, level, depth) {
    var cells = this.columns.map(function(column, index) {
        var colSpan = index ? 1 : depth - level + 1;
        if (column.footerTemplate) {
            return Object.assign({
                background: "#dfdfdf",
                color: "#333",
                colSpan: colSpan,
                value: column.footerTemplate(Object.assign({}, (aggregates || {})[column.field]))
            }, column.footerCellOptions);
        }

        return Object.assign({
            background: "#dfdfdf",
            color: "#333",
            colSpan: colSpan
        }, column.footerCellOptions);
    });

    return {
        type: "footer",
        cells: this._createPaddingCells(level).concat(cells)
    };
};

ExcelExporter.prototype._footer = function _footer (dataItem) {
    var rows = [];
    var footer = this.columns.some(function (column) { return column.groupFooterTemplate; });

    var templateData, group;
    if (footer) {
        group = {
            group: { items: dataItem.items,
                     field: dataItem.field,
                     value: dataItem.value }
        };
        templateData = {};
        Object.keys(dataItem.aggregates).forEach(function (key) {
            templateData[key] = Object.assign({}, dataItem.aggregates[key], group);
        });
    }

    var cells = this.columns.map(function (column) {
        if (column.groupFooterTemplate) {
            var data = Object.assign({}, templateData, dataItem.aggregates[column.field], group);
            return Object.assign({
                background: "#dfdfdf",
                color: "#333",
                value: column.groupFooterTemplate(data)
            }, column.groupFooterCellOptions);
        }

        return Object.assign({
            background: "#dfdfdf",
            color: "#333"
        }, column.groupFooterCellOptions);
    });

    if (footer) {
        rows.push({
            type: "group-footer",
            cells: this._createPaddingCells(this.groups.length).concat(cells)
        });
    }

    return rows;
};

ExcelExporter.prototype._isColumnVisible = function _isColumnVisible (column) {
    return this._visibleColumns([ column ]).length > 0 && (column.field || column.columns);
};

ExcelExporter.prototype._visibleColumns = function _visibleColumns (columns) {
        var this$1 = this;

    return columns.filter(function (column) {
        var result = !column.hidden;
        if (result && column.columns) {
            result = this$1._visibleColumns(column.columns).length > 0;
        }
        return result;
    });
};

ExcelExporter.prototype._headerRow = function _headerRow (row, groups) {
        var this$1 = this;

    var headers = row.cells.map(function(cell) {
        return Object.assign(cell, {
            colSpan: cell.colSpan > 1 ? cell.colSpan : 1,
            rowSpan: row.rowSpan > 1 && !cell.colSpan ? row.rowSpan : 1
        });
    });

    if (this.hierarchy) {
        headers[0].colSpan = this._depth() + 1;
    }

    return {
        type: "header",
        cells: createArray(groups.length, function () { return Object.assign({
            background: "#7a7a7a",
            color: "#fff"
        }, this$1.options.headerPaddingCellOptions); }).concat(headers)
    };
};

ExcelExporter.prototype._prependHeaderRows = function _prependHeaderRows (rows) {
        var this$1 = this;

    var groups = this.groups;

    var headerRows = [ { rowSpan: 1, cells: [], index: 0 } ];

    this._prepareHeaderRows(headerRows, this.options.columns);

    for (var idx = headerRows.length - 1; idx >= 0; idx--) {
        rows.unshift(this$1._headerRow(headerRows[idx], groups));
    }
};

ExcelExporter.prototype._prepareHeaderRows = function _prepareHeaderRows (rows, columns, parentCell, parentRow) {
        var this$1 = this;

    var row = parentRow || rows[rows.length - 1];
    var childRow = rows[row.index + 1];
    var totalColSpan = 0;

    for (var idx = 0; idx < columns.length; idx++) {
        var column = columns[idx];
        if (this$1._isColumnVisible(column)) {

            var cell = Object.assign({
                background: "#7a7a7a",
                color: "#fff",
                value: column.title || column.field,
                colSpan: 0
            }, column.headerCellOptions);
            row.cells.push(cell);

            if (column.columns && column.columns.length) {
                if (!childRow) {
                    childRow = { rowSpan: 0, cells: [], index: rows.length };
                    rows.push(childRow);
                }
                cell.colSpan = this$1._trimColumns(this$1._visibleColumns(column.columns)).length;
                this$1._prepareHeaderRows(rows, column.columns, cell, childRow);
                totalColSpan += cell.colSpan - 1;
                row.rowSpan = rows.length - row.index;
            }
        }
    }

    if (parentCell) {
        parentCell.colSpan += totalColSpan;
    }
};

ExcelExporter.prototype._rows = function _rows () {
        var this$1 = this;

    var rows = this._dataRows(this.data, 0);

    if (this.columns.length) {
        this._prependHeaderRows(rows);
        var footer = false;

        var cells = this.columns.map(function (column) {
            if (column.footerTemplate) {
                footer = true;

                return Object.assign({
                    background: "#dfdfdf",
                    color: "#333",
                    value: column.footerTemplate(Object.assign({}, this$1.aggregates, this$1.aggregates[column.field]))
                }, column.footerCellOptions);
            }

            return Object.assign({
                background: "#dfdfdf",
                color: "#333"
            }, column.footerCellOptions);
        });

        if (footer) {
            rows.push({
                type: "footer",
                cells: this._createPaddingCells(this.groups.length).concat(cells)
            });
        }
    }

    return rows;
};

ExcelExporter.prototype._headerDepth = function _headerDepth (columns) {
        var this$1 = this;

    var result = 1;
    var max = 0;

    for (var idx = 0; idx < columns.length; idx++) {
        if (columns[idx].columns) {
            var temp = this$1._headerDepth(columns[idx].columns);
            if (temp > max) {
                max = temp;
            }
        }
    }
    return result + max;
};

ExcelExporter.prototype._freezePane = function _freezePane () {
    var columns = this._visibleColumns(this.options.columns || []);

    var colSplit = this._visibleColumns(this._trimColumns(this._leafColumns(columns.filter(function(column) {
        return column.locked;
    })))).length;

    return {
        rowSplit: this._headerDepth(columns),
        colSplit: colSplit ? colSplit + this.groups.length : 0
    };
};

ExcelExporter.prototype._cell = function _cell (dataItem, column) {
    return Object.assign({
        value: column.value(dataItem)
    }, column.cellOptions);
};

ExcelExporter.prototype._depth = function _depth () {
    var depth = 0;

    if (this.hierarchy) {
        depth = this.hierarchy.depth;
    } else {
        depth = this.groups.length;
    }

    return depth;
};

ExcelExporter.prototype._columns = function _columns () {
    var depth = this._depth();
    var columns = createArray(depth, function () { return ({ width: 20 }); });

    return columns.concat(this.columns.map(function(column) {
        return {
            width: parseInt(column.width, 10),
            autoWidth: column.width ? false : true
        };
    }));
};

var current$1 = {
    toString: function (value) { return value; }
};

var IntlService = function IntlService () {};

IntlService.register = function register (userImplementation) {
    current$1 = userImplementation;
};

IntlService.toString = function toString (value, format) {
    return current$1.toString(value, format);
};

function createZip() {
    return new JSZip();
}

// date packing utilities from Kendo Spreadsheet

// Julian days algorithms from http://www.hermetic.ch/cal_stud/jdn.htm#comp
function dateToJulianDays(y, m, d) {
    return ((1461 * (y + 4800 + ((m - 13) / 12 | 0))) / 4 | 0) +
        ((367 * (m - 1 - 12 * ((m - 13) / 12 | 0))) / 12 | 0) -
        ((3 * (((y + 4900 + ((m - 13) / 12 | 0)) / 100 | 0))) / 4 | 0) +
        d - 32075;
}

// This uses the Google Spreadsheet approach: treat 1899-12-31 as day 1, allowing to avoid
// implementing the "Leap Year Bug" yet still be Excel compatible for dates starting 1900-03-01.
var BASE_DATE = dateToJulianDays(1900, 0, -1);

function packDate(year, month, date) {
    return dateToJulianDays(year, month, date) - BASE_DATE;
}

function packTime(hh, mm, ss, ms) {
    return (hh + (mm + (ss + ms / 1000) / 60) / 60) / 24;
}

function dateToSerial(date) {
    var time = packTime(date.getHours(),
                          date.getMinutes(),
                          date.getSeconds(),
                          date.getMilliseconds());
    var serial = packDate(date.getFullYear(),
                            date.getMonth(),
                            date.getDate());
    return serial < 0 ? serial - 1 + time : serial + time;
}

var DATA_URL_PREFIX = "data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,";
var DATA_URL_OPTIONS = { compression: "DEFLATE", type: "base64" };

/* eslint-disable key-spacing, no-arrow-condition, indent, no-nested-ternary, consistent-return */

function toDataURI(content) {
    return DATA_URL_PREFIX + content;
}

function indexOf(thing, array) {
    return array.indexOf(thing);
}

var parseJSON = JSON.parse.bind(JSON);

function ESC(val) {
    return String(val)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\"/g, "&quot;")
        .replace(/\'/g, "&#39;");
}

function repeat(count, func) {
    var str = "";
    for (var i = 0; i < count; ++i) {
        str += func(i);
    }
    return str;
}

function foreach(arr, func) {
    var str = "";
    for (var i = 0; i < arr.length; ++i) {
        str += func(arr[i], i);
    }
    return str;
}

var XMLHEAD = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r';

var RELS = XMLHEAD + "\n            <Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n               <Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/>\n               <Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/>\n               <Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/>\n            </Relationships>";

var CORE = function (ref) {
  var creator = ref.creator;
  var lastModifiedBy = ref.lastModifiedBy;
  var created = ref.created;
  var modified = ref.modified;

  return (XMLHEAD + "\n <cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\"\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\"\n   xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n   <dc:creator>" + (ESC(creator)) + "</dc:creator>\n   <cp:lastModifiedBy>" + (ESC(lastModifiedBy)) + "</cp:lastModifiedBy>\n   <dcterms:created xsi:type=\"dcterms:W3CDTF\">" + (ESC(created)) + "</dcterms:created>\n   <dcterms:modified xsi:type=\"dcterms:W3CDTF\">" + (ESC(modified)) + "</dcterms:modified>\n</cp:coreProperties>");
};

var APP = function (ref) {
  var sheets = ref.sheets;

  return (XMLHEAD + "\n<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\">\n  <Application>Microsoft Excel</Application>\n  <DocSecurity>0</DocSecurity>\n  <ScaleCrop>false</ScaleCrop>\n  <HeadingPairs>\n    <vt:vector size=\"2\" baseType=\"variant\">\n      <vt:variant>\n        <vt:lpstr>Worksheets</vt:lpstr>\n      </vt:variant>\n      <vt:variant>\n        <vt:i4>" + (sheets.length) + "</vt:i4>\n      </vt:variant>\n    </vt:vector>\n  </HeadingPairs>\n  <TitlesOfParts>\n    <vt:vector size=\"" + (sheets.length) + "\" baseType=\"lpstr\">" + (foreach(sheets, function (sheet, i) { return sheet.options.title
          ? ("<vt:lpstr>" + (ESC(sheet.options.title)) + "</vt:lpstr>")
          : ("<vt:lpstr>Sheet" + (i + 1) + "</vt:lpstr>"); }
      )) + "</vt:vector>\n  </TitlesOfParts>\n  <LinksUpToDate>false</LinksUpToDate>\n  <SharedDoc>false</SharedDoc>\n  <HyperlinksChanged>false</HyperlinksChanged>\n  <AppVersion>14.0300</AppVersion>\n</Properties>");
};

var CONTENT_TYPES = function (ref) {
  var count = ref.count;

  return (XMLHEAD + "\n<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">\n  <Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\" />\n  <Default Extension=\"xml\" ContentType=\"application/xml\" />\n  <Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\" />\n  <Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>\n  <Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>\n  " + (repeat(count, function (idx) { return ("<Override PartName=\"/xl/worksheets/sheet" + (idx + 1) + ".xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\" />"); })) + "\n  <Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\" />\n  <Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\" />\n</Types>");
};

var WORKBOOK = function (ref) {
  var sheets = ref.sheets;
  var filterNames = ref.filterNames;
  var userNames = ref.userNames;

  return (XMLHEAD + "\n<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">\n  <fileVersion appName=\"xl\" lastEdited=\"5\" lowestEdited=\"5\" rupBuild=\"9303\" />\n  <workbookPr defaultThemeVersion=\"124226\" />\n  <bookViews>\n    <workbookView xWindow=\"240\" yWindow=\"45\" windowWidth=\"18195\" windowHeight=\"7995\" />\n  </bookViews>\n  <sheets>\n  " + (foreach(sheets, function (ref, i) {
    var options = ref.options;

    var name = options.name || options.title || ("Sheet" + (i + 1));
    return ("<sheet name=\"" + (ESC(name)) + "\" sheetId=\"" + (i + 1) + "\" r:id=\"rId" + (i + 1) + "\" />");
  })) + "\n  </sheets>\n  " + (filterNames.length || userNames.length ? ("\n    <definedNames>\n      " + (foreach(filterNames, function (f) { return ("\n         <definedName name=\"_xlnm._FilterDatabase\" hidden=\"1\" localSheetId=\"" + (f.localSheetId) + "\">" + (ESC(f.name)) + "!" + (ESC(f.from)) + ":" + (ESC(f.to)) + "</definedName>"); })) + "\n      " + (foreach(userNames, function (f) { return ("\n         <definedName name=\"" + (f.name) + "\" hidden=\"" + (f.hidden ? 1 : 0) + "\" " + (f.localSheetId != null ? ("localSheetId=\"" + (f.localSheetId) + "\"") : '') + ">" + (ESC(f.value)) + "</definedName>"); })) + "\n    </definedNames>") : '') + "\n  <calcPr fullCalcOnLoad=\"1\" calcId=\"145621\" />\n</workbook>");
};

var WORKSHEET = function (ref) {
  var frozenColumns = ref.frozenColumns;
  var frozenRows = ref.frozenRows;
  var columns = ref.columns;
  var defaults = ref.defaults;
  var data = ref.data;
  var index = ref.index;
  var mergeCells = ref.mergeCells;
  var autoFilter = ref.autoFilter;
  var filter = ref.filter;
  var showGridLines = ref.showGridLines;
  var hyperlinks = ref.hyperlinks;
  var validations = ref.validations;
  var defaultCellStyleId = ref.defaultCellStyleId;
  var rtl = ref.rtl;

  return (XMLHEAD + "\n<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\" mc:Ignorable=\"x14ac\">\n   <dimension ref=\"A1\" />\n\n   <sheetViews>\n     <sheetView " + (rtl ? 'rightToLeft="1"' : '') + " " + (index === 0 ? 'tabSelected="1"' : '') + " workbookViewId=\"0\" " + (showGridLines === false ? 'showGridLines="0"' : '') + ">\n     " + (frozenRows || frozenColumns ? ("\n       <pane state=\"frozen\"\n         " + (frozenColumns ? ("xSplit=\"" + frozenColumns + "\"") : '') + "\n         " + (frozenRows ? ("ySplit=\"" + frozenRows + "\"") : '') + "\n         topLeftCell=\"" + (String.fromCharCode(65 + (frozenColumns || 0)) + ((frozenRows || 0) + 1)) + "\"\n       />") : '') + "\n     </sheetView>\n   </sheetViews>\n\n   <sheetFormatPr x14ac:dyDescent=\"0.25\" defaultRowHeight=\"" + (defaults.rowHeight ? defaults.rowHeight * 0.75 : 15) + "\"\n     " + (defaults.columnWidth ? ("defaultColWidth=\"" + (toWidth(defaults.columnWidth)) + "\"") : '') + " />\n\n   " + (defaultCellStyleId != null || (columns && columns.length > 0) ? ("\n     <cols>\n       " + (!columns || !columns.length ? ("\n         <col min=\"1\" max=\"16384\" style=\"" + defaultCellStyleId + "\"\n              " + (defaults.columnWidth ? ("width=\"" + (toWidth(defaults.columnWidth)) + "\"") : '') + " /> ") : '') + "\n       " + (foreach(columns, function (column, ci) {
         var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1);
         if (column.width === 0) {
           return ("<col " + (defaultCellStyleId != null ? ("style=\"" + defaultCellStyleId + "\"") : '') + "\n                        min=\"" + columnIndex + "\" max=\"" + columnIndex + "\" hidden=\"1\" customWidth=\"1\" />");
         }
         return ("<col " + (defaultCellStyleId != null ? ("style=\"" + defaultCellStyleId + "\"") : '') + "\n                      min=\"" + columnIndex + "\" max=\"" + columnIndex + "\" customWidth=\"1\"\n                      " + (column.autoWidth
                          ? ("width=\"" + (((column.width * 7 + 5) / 7 * 256) / 256) + "\" bestFit=\"1\"")
                          : ("width=\"" + (toWidth(column.width)) + "\"")) + " />");
       })) + "\n     </cols>") : '') + "\n\n   <sheetData>\n     " + (foreach(data, function (row, ri) {
       var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1);
       return ("\n         <row r=\"" + rowIndex + "\" x14ac:dyDescent=\"0.25\"\n              " + (row.height === 0 ? 'hidden="1"'
                                 : row.height ? ("ht=\"" + (toHeight(row.height)) + "\" customHeight=\"1\"") : "") + ">\n           " + (foreach(row.data, function (cell) { return ("\n             <c r=\"" + (cell.ref) + "\" " + (cell.style ? ("s=\"" + (cell.style) + "\"") : '') + " " + (cell.type ? ("t=\"" + (cell.type) + "\"") : '') + ">\n               " + (cell.formula != null ? writeFormula(cell.formula) : '') + "\n               " + (cell.value != null ? ("<v>" + (ESC(cell.value)) + "</v>") : '') + "\n             </c>"); })) + "\n         </row>\n       ");})) + "\n   </sheetData>\n\n   " + (autoFilter ? ("<autoFilter ref=\"" + (autoFilter.from) + ":" + (autoFilter.to) + "\"/>")
                : filter ? spreadsheetFilters(filter) : '') + "\n\n   " + (mergeCells.length ? ("\n     <mergeCells count=\"" + (mergeCells.length) + "\">\n       " + (foreach(mergeCells, function (ref) { return ("<mergeCell ref=\"" + ref + "\"/>"); })) + "\n     </mergeCells>") : '') + "\n\n   " + (validations.length ? ("\n     <dataValidations>\n       " + (foreach(validations, function (val) { return ("\n         <dataValidation sqref=\"" + (val.sqref.join(" ")) + "\"\n                         showErrorMessage=\"" + (val.showErrorMessage) + "\"\n                         type=\"" + (ESC(val.type)) + "\"\n                         " + (val.type !== "list" ? ("operator=\"" + (ESC(val.operator)) + "\"") : '') + "\n                         allowBlank=\"" + (val.allowBlank) + "\"\n                         showDropDown=\"" + (val.showDropDown) + "\"\n                         " + (val.error ? ("error=\"" + (ESC(val.error)) + "\"") : '') + "\n                         " + (val.errorTitle ? ("errorTitle=\"" + (ESC(val.errorTitle)) + "\"") : '') + ">\n           " + (val.formula1 ? ("<formula1>" + (ESC(val.formula1)) + "</formula1>") : '') + "\n           " + (val.formula2 ? ("<formula2>" + (ESC(val.formula2)) + "</formula2>") : '') + "\n         </dataValidation>"); })) + "\n     </dataValidations>") : '') + "\n\n   " + (hyperlinks.length ? ("\n     <hyperlinks>\n       " + (foreach(hyperlinks, function (link, hi) { return ("\n         <hyperlink ref=\"" + (link.ref) + "\" r:id=\"rId" + hi + "\"/>"); })) + "\n     </hyperlinks>") : '') + "\n\n   <pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\" />\n</worksheet>");
};

var WORKBOOK_RELS = function (ref) {
  var count = ref.count;

  return (XMLHEAD + "\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n  " + (repeat(count, function (idx) { return ("\n    <Relationship Id=\"rId" + (idx + 1) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet" + (idx + 1) + ".xml\" />"); })) + "\n  <Relationship Id=\"rId" + (count + 1) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\" />\n  <Relationship Id=\"rId" + (count + 2) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\" />\n</Relationships>");
};

var WORKSHEET_RELS = function (ref) {
  var hyperlinks = ref.hyperlinks;

  return (XMLHEAD + "\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n  " + (foreach(hyperlinks, function (link, i) { return ("\n    <Relationship Id=\"rId" + i + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\" Target=\"" + (ESC(link.target)) + "\" TargetMode=\"External\" />"); })) + "\n</Relationships>");
};

var SHARED_STRINGS = function (ref) {
  var count = ref.count;
  var uniqueCount = ref.uniqueCount;
  var indexes = ref.indexes;

  return (XMLHEAD + "\n<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"" + count + "\" uniqueCount=\"" + uniqueCount + "\">\n  " + (foreach(Object.keys(indexes), function (index) { return ("\n    <si><t xml:space=\"preserve\">" + (ESC(index.substring(1))) + "</t></si>"); })) + "\n</sst>");
};

var STYLES = function (ref) {
  var formats = ref.formats;
  var fonts = ref.fonts;
  var fills = ref.fills;
  var borders = ref.borders;
  var styles = ref.styles;

  return (XMLHEAD + "\n<styleSheet\n    xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"x14ac\"\n    xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">\n  <numFmts count=\"" + (formats.length) + "\">\n  " + (foreach(formats, function (format, fi) { return ("\n    <numFmt formatCode=\"" + (ESC(format.format)) + "\" numFmtId=\"" + (165 + fi) + "\" />"); })) + "\n  </numFmts>\n  <fonts count=\"" + (fonts.length + 1) + "\" x14ac:knownFonts=\"1\">\n    <font>\n       <sz val=\"11\" />\n       <color theme=\"1\" />\n       <name val=\"Calibri\" />\n       <family val=\"2\" />\n       <scheme val=\"minor\" />\n    </font>\n    " + (foreach(fonts, function (font) { return ("\n    <font>\n      <sz val=\"" + (font.fontSize || 11) + "\" />\n      " + (font.bold ? '<b/>' : '') + "\n      " + (font.italic ? '<i/>' : '') + "\n      " + (font.underline ? '<u/>' : '') + "\n      " + (font.color ? ("<color rgb=\"" + (ESC(font.color)) + "\" />") : '<color theme="1" />') + "\n      " + (font.fontFamily ? ("\n        <name val=\"" + (ESC(font.fontFamily)) + "\" />\n        <family val=\"2\" />\n      ") : "\n        <name val=\"Calibri\" />\n        <family val=\"2\" />\n        <scheme val=\"minor\" />\n      ") + "\n    </font>"); })) + "\n  </fonts>\n  <fills count=\"" + (fills.length + 2) + "\">\n      <fill><patternFill patternType=\"none\"/></fill>\n      <fill><patternFill patternType=\"gray125\"/></fill>\n    " + (foreach(fills, function (fill) { return ("\n      " + (fill.background ? ("\n        <fill>\n          <patternFill patternType=\"solid\">\n              <fgColor rgb=\"" + (ESC(fill.background)) + "\"/>\n          </patternFill>\n        </fill>\n      ") : '')); })) + "\n  </fills>\n  <borders count=\"" + (borders.length + 1) + "\">\n    <border><left/><right/><top/><bottom/><diagonal/></border>\n    " + (foreach(borders, borderTemplate)) + "\n  </borders>\n  <cellStyleXfs count=\"1\">\n    <xf borderId=\"0\" fillId=\"0\" fontId=\"0\" />\n  </cellStyleXfs>\n  <cellXfs count=\"" + (styles.length + 1) + "\">\n    <xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\" />\n    " + (foreach(styles, function (style) { return ("\n      <xf xfId=\"0\"\n          " + (style.fontId ? ("fontId=\"" + (style.fontId) + "\" applyFont=\"1\"") : '') + "\n          " + (style.fillId ? ("fillId=\"" + (style.fillId) + "\" applyFill=\"1\"") : '') + "\n          " + (style.numFmtId ? ("numFmtId=\"" + (style.numFmtId) + "\" applyNumberFormat=\"1\"") : '') + "\n          " + (style.textAlign || style.verticalAlign || style.wrap ? 'applyAlignment="1"' : '') + "\n          " + (style.borderId ? ("borderId=\"" + (style.borderId) + "\" applyBorder=\"1\"") : '') + ">\n        " + (style.textAlign || style.verticalAlign || style.wrap ? ("\n        <alignment\n          " + (style.textAlign ? ("horizontal=\"" + (ESC(style.textAlign)) + "\"") : '') + "\n          " + (style.verticalAlign ? ("vertical=\"" + (ESC(style.verticalAlign)) + "\"") : '') + "\n          " + (style.wrap ? 'wrapText="1"' : '') + " />\n        ") : '') + "\n      </xf>\n    "); })) + "\n  </cellXfs>\n  <cellStyles count=\"1\">\n    <cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/>\n  </cellStyles>\n  <dxfs count=\"0\" />\n  <tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleMedium9\" />\n</styleSheet>");
};

function writeFormula(formula) {
    if (typeof formula == "string") {
        return ("<f>" + (ESC(formula)) + "</f>");
    }
    // array formulas
    return ("<f t=\"array\" ref=\"" + (formula.ref) + "\">" + (ESC(formula.src)) + "</f>");
}

function numChar(colIndex) {
   var letter = Math.floor(colIndex / 26) - 1;

   return (letter >= 0 ? numChar(letter) : "") + String.fromCharCode(65 + (colIndex % 26));
}

function ref(rowIndex, colIndex) {
    return numChar(colIndex) + (rowIndex + 1);
}

function $ref(rowIndex, colIndex) {
    return "$" + numChar(colIndex) + "$" + (rowIndex + 1);
}

function filterRowIndex(options) {
    var frozenRows = options.frozenRows || (options.freezePane || {}).rowSplit || 1;
    return frozenRows - 1;
}

function toWidth(px) {
    return ((px / 7) * 100 + 0.5) / 100;
}

function toHeight(px) {
    return px * 0.75;
}

function stripFunnyChars(value) {
    return String(value)
        .replace(/[\x00-\x09\x0B\x0C\x0E-\x1F]/g, "") // leave CRLF in
        .replace(/\r?\n/g, "\r\n");                   // make sure LF is preceded by CR
}

var Worksheet = function Worksheet(options, sharedStrings, styles, borders) {
      this.options = options;
      this._strings = sharedStrings;
      this._styles = styles;
      this._borders = borders;
      this._validations = {};
  };

  Worksheet.prototype.relsToXML = function relsToXML () {
      var hyperlinks = this.options.hyperlinks || [];
      if (!hyperlinks.length) {
          return "";
      }

      return WORKSHEET_RELS({ hyperlinks: hyperlinks });
  };

  Worksheet.prototype.toXML = function toXML (index) {
        var this$1 = this;

      var mergeCells = this.options.mergedCells || [];
      var rows = this.options.rows || [];
      var data = inflate(rows, mergeCells);

      this._readCells(data);

      var autoFilter = this.options.filter;
      var filter;
      if (autoFilter && (typeof autoFilter.from === "number") && (typeof autoFilter.to === "number")) {
          // Grid enables auto filter
          autoFilter = {
              from: ref(filterRowIndex(this.options), autoFilter.from),
              to: ref(filterRowIndex(this.options), autoFilter.to)
          };
      } else if (autoFilter && autoFilter.ref && autoFilter.columns) {
          // this is probably from the Spreadsheet
          filter = autoFilter;
          autoFilter = null;
      }

      var validations = [];
      for (var i in this._validations) {
          if (Object.prototype.hasOwnProperty.call(this$1._validations, i)) {
              validations.push(this$1._validations[i]);
          }
      }

      var defaultCellStyleId = null;
      if (this.options.defaultCellStyle) {
          defaultCellStyleId = this._lookupStyle(this.options.defaultCellStyle);
      }

      var freezePane = this.options.freezePane || {};
      var defaults = this.options.defaults || {};
      return WORKSHEET({
          frozenColumns: this.options.frozenColumns || freezePane.colSplit,
          frozenRows: this.options.frozenRows || freezePane.rowSplit,
          columns: this.options.columns,
          defaults: defaults,
          data: data,
          index: index,
          mergeCells: mergeCells,
          autoFilter: autoFilter,
          filter: filter,
          showGridLines: this.options.showGridLines,
          hyperlinks: this.options.hyperlinks || [],
          validations: validations,
          defaultCellStyleId: defaultCellStyleId,
          rtl: this.options.rtl !== undefined ? this.options.rtl : defaults.rtl
        });
    };

    Worksheet.prototype._lookupString = function _lookupString (value) {
        var key = "$" + value;
        var index = this._strings.indexes[key];
        var result;

        if (index !== undefined) {
            result = index;
        } else {
            result = this._strings.indexes[key] = this._strings.uniqueCount;
            this._strings.uniqueCount ++;
        }

        this._strings.count ++;

        return result;
    };

    Worksheet.prototype._lookupStyle = function _lookupStyle (style) {
        var json = JSON.stringify(style);

        if (json === "{}") {
            return 0;
        }

        var index = indexOf(json, this._styles);

      if (index < 0) {
          index = this._styles.push(json) - 1;
      }

      // There is one default style
      return index + 1;
  };

  Worksheet.prototype._lookupBorder = function _lookupBorder (border) {
      var json = JSON.stringify(border);
      if (json === "{}") {
          return;
      }

      var index = indexOf(json, this._borders);
      if (index < 0) {
          index = this._borders.push(json) - 1;
      }

      // There is one default border
      return index + 1;
  };

  Worksheet.prototype._readCells = function _readCells (rowData) {
        var this$1 = this;

      for (var i = 0; i < rowData.length; i++) {
          var row = rowData[i];
          var cells = row.cells;

          row.data = [];

          for (var j = 0; j < cells.length; j++) {
              var cellData = this$1._cell(cells[j], row.index, j);
                if (cellData) {
                    row.data.push(cellData);
                }
            }
        }
    };

    Worksheet.prototype._cell = function _cell (data, rowIndex, cellIndex) {
        if (!data || data === EMPTY_CELL) {
            return null;
        }

        var value = data.value;

      var border = {};

      if (data.borderLeft) {
          border.left = data.borderLeft;
      }

      if (data.borderRight) {
          border.right = data.borderRight;
      }

      if (data.borderTop) {
          border.top = data.borderTop;
      }

      if (data.borderBottom) {
          border.bottom = data.borderBottom;
      }

      border = this._lookupBorder(border);

      var defStyle = this.options.defaultCellStyle || {};
        var style = { borderId: border };

      (function(add) {
          add("color");
          add("background");
            add("bold");
            add("italic");
            add("underline");
          if (!add("fontFamily")) { add("fontName", "fontFamily"); }
          add("fontSize");
            add("format");
          if (!add("textAlign")) { add("hAlign", "textAlign"); }
          if (!add("verticalAlign")) { add("vAlign", "verticalAlign"); }
            add("wrap");
        })(
            function(prop, target) {
                var val = data[prop];
                if (val === undefined) {
                    val = defStyle[prop];
                }
                if (val !== undefined) {
                    style[target || prop] = val;
                    return true;
                }
            }
        );

        var columns = this.options.columns || [];

      var column = columns[cellIndex];
      var type = typeof value;

      if (column && column.autoWidth) {
          var displayValue = value;

          // XXX: let's not bring kendo.toString in only for this.
          //    better wait until the spreadsheet engine is available as a separate
          //    component, then we can use a real Excel-like formatter.
          //
          if (type === "number") {
              // kendo.toString will not behave exactly like the Excel format
                // Still, it's the best we have available for estimating the character count.
              displayValue = IntlService.toString(value, data.format);
          }

          column.width = Math.max(column.width || 0, String(displayValue).length);
      }

      if (type === "string") {
          value = stripFunnyChars(value);
          value = this._lookupString(value);
            type = "s";
      } else if (type === "number") {
          type = "n";
      } else if (type === "boolean") {
            type = "b";
          value = Number(value);
      } else if (value && value.getTime) {
            type = null;
            value = dateToSerial(value);
            if (!style.format) {
                style.format = "mm-dd-yy";
            }
        } else {
            type = null;
          value = null;
      }

      style = this._lookupStyle(style);

      var cellName = ref(rowIndex, cellIndex);

      if (data.validation) {
          this._addValidation(data.validation, cellName);
      }

      return {
          value: value,
          formula: data.formula,
            type: type,
            style: style,
            ref: cellName
        };
    };

    Worksheet.prototype._addValidation = function _addValidation (v, ref) {
        var tmp = {
            showErrorMessage : v.type === "reject" ? 1 : 0,
            formula1         : v.from,
            formula2         : v.to,
            type             : MAP_EXCEL_TYPE[v.dataType] || v.dataType,
            operator         : MAP_EXCEL_OPERATOR[v.comparerType] || v.comparerType,
            allowBlank       : v.allowNulls ? 1 : 0,
            showDropDown     : v.showButton ? 0 : 1, // LOL, Excel!
            error            : v.messageTemplate,
          errorTitle     : v.titleTemplate
      };
      var json = JSON.stringify(tmp);
      if (!this._validations[json]) {
          this._validations[json] = tmp;
          tmp.sqref = [];
      }
      this._validations[json].sqref.push(ref);
  };

var MAP_EXCEL_OPERATOR = {
    // includes only what differs; key is our operator, value is Excel
    // operator.
    greaterThanOrEqualTo : "greaterThanOrEqual",
    lessThanOrEqualTo    : "lessThanOrEqual"
};

var MAP_EXCEL_TYPE = {
    number: "decimal"
};

var defaultFormats = {
    "General": 0,
    "0": 1,
    "0.00": 2,
    "#,##0": 3,
    "#,##0.00": 4,
    "0%": 9,
    "0.00%": 10,
    "0.00E+00": 11,
    "# ?/?": 12,
    "# ??/??": 13,
    "mm-dd-yy": 14,
    "d-mmm-yy": 15,
    "d-mmm": 16,
    "mmm-yy": 17,
    "h:mm AM/PM": 18,
    "h:mm:ss AM/PM": 19,
    "h:mm": 20,
    "h:mm:ss": 21,
    "m/d/yy h:mm": 22,
    "#,##0 ;(#,##0)": 37,
    "#,##0 ;[Red](#,##0)": 38,
    "#,##0.00;(#,##0.00)": 39,
    "#,##0.00;[Red](#,##0.00)": 40,
    "mm:ss": 45,
    "[h]:mm:ss": 46,
    "mmss.0": 47,
    "##0.0E+0": 48,
    "@": 49,
    "[$-404]e/m/d": 27,
    "m/d/yy": 30,
    "t0": 59,
    "t0.00": 60,
    "t#,##0": 61,
    "t#,##0.00": 62,
    "t0%": 67,
    "t0.00%": 68,
    "t# ?/?": 69,
    "t# ??/??": 70
};

function convertColor(value) {
    var color = value;
    if (color.length < 6) {
        color = color.replace(/(\w)/g, function($0, $1) {
            return $1 + $1;
        });
    }

    color = color.substring(1).toUpperCase();

    if (color.length < 8) {
        color = "FF" + color;
    }

    return color;
}

var Workbook = function Workbook(options) {
      var this$1 = this;

      this.options = options || {};
      this._strings = {
          indexes: {},
          count: 0,
          uniqueCount: 0
      };
      this._styles = [];
      this._borders = [];

      this._sheets = map(this.options.sheets || [], function (options) {
          options.defaults = this$1.options;
          return new Worksheet(options, this$1._strings, this$1._styles, this$1._borders);
      });
  };

  Workbook.prototype.toZIP = function toZIP () {
        var this$1 = this;

      var zip = createZip();

      var docProps = zip.folder("docProps");

      docProps.file("core.xml", CORE({
          creator: this.options.creator || "Kendo UI",
          lastModifiedBy: this.options.creator || "Kendo UI",
          created: this.options.date || new Date().toJSON(),
          modified: this.options.date || new Date().toJSON()
      }));

      var sheetCount = this._sheets.length;

      docProps.file("app.xml", APP({ sheets: this._sheets }));

      var rels = zip.folder("_rels");
      rels.file(".rels", RELS);

      var xl = zip.folder("xl");

      var xlRels = xl.folder("_rels");
      xlRels.file("workbook.xml.rels", WORKBOOK_RELS({ count: sheetCount }));

      var sheetIds = {};

      xl.file("workbook.xml", WORKBOOK({
          sheets: this._sheets,
          filterNames: map(this._sheets, function(sheet, index) {
              var options = sheet.options;
              var sheetName = (options.name || options.title || "Sheet" + (index + 1));
              sheetIds[sheetName.toLowerCase()] = index;
              var filter = options.filter;
              if (filter) {
                  if (filter.ref) {
                      // spreadsheet provides `ref`
                      var a = filter.ref.split(":");
                      var from = parseRef(a[0]);
                      var to = parseRef(a[1]);
                      return {
                          localSheetId: index,
                          name: sheetName,
                          from: $ref(from.row, from.col),
                          to: $ref(to.row, to.col)
                      };
                  } else if (typeof filter.from !== "undefined" && typeof filter.to !== "undefined") {
                      // grid does this
                      return {
                          localSheetId: index,
                          name: sheetName,
                            from: $ref(filterRowIndex(options), filter.from),
                            to: $ref(filterRowIndex(options), filter.to)
                        };
                    }
                }
            }),
            userNames: map(this.options.names || [], function(def) {
                return {
                    name: def.localName,
                    localSheetId: def.sheet ? sheetIds[def.sheet.toLowerCase()] : null,
                    value: def.value,
                    hidden: def.hidden
                };
            })
        }));

        var worksheets = xl.folder("worksheets");

      var sheetRels = worksheets.folder("_rels");

      for (var idx = 0; idx < sheetCount; idx++) {
          var sheet = this$1._sheets[idx];
          var sheetName = "sheet" + (idx + 1) + ".xml";
          var relsXml = sheet.relsToXML();

          if (relsXml) {
              sheetRels.file(sheetName + ".rels", relsXml);
          }

          worksheets.file(sheetName, sheet.toXML(idx));
      }

      var borders = map(this._borders, parseJSON);

      var styles = map(this._styles, parseJSON);

      var hasFont = function(style) {
          return style.underline || style.bold || style.italic || style.color || style.fontFamily || style.fontSize;
      };

      var fonts = map(styles, function(style) {
            if (style.color) {
                style.color = convertColor(style.color);
            }

            if (hasFont(style)) {
                return style;
            }
        });

        var formats = map(styles, function(style) {
            if (style.format && defaultFormats[style.format] === undefined) {
              return style;
          }
      });

      var fills = map(styles, function(style) {
          if (style.background) {
              style.background = convertColor(style.background);
              return style;
          }
      });

      xl.file("styles.xml", STYLES({
            fonts: fonts,
          fills: fills,
          formats: formats,
          borders: borders,
            styles: map(styles, function(style) {
              var result = {};

              if (hasFont(style)) {
                  result.fontId = indexOf(style, fonts) + 1;
                }

              if (style.background) {
                  result.fillId = indexOf(style, fills) + 2;
                }

                result.textAlign = style.textAlign;
              result.verticalAlign = style.verticalAlign;
              result.wrap = style.wrap;
                result.borderId = style.borderId;

                if (style.format) {
                    if (defaultFormats[style.format] !== undefined) {
                        result.numFmtId = defaultFormats[style.format];
                    } else {
                        result.numFmtId = 165 + indexOf(style, formats);
                    }
                }

                return result;
            })
        }));

        xl.file("sharedStrings.xml", SHARED_STRINGS(this._strings));

      zip.file("[Content_Types].xml", CONTENT_TYPES( { count: sheetCount }));

      return zip;
  };

  Workbook.prototype.toDataURL = function toDataURL () {
      var zip = this.toZIP();

      return zip.generateAsync ? zip.generateAsync(DATA_URL_OPTIONS).then(toDataURI) : toDataURI(zip.generate(DATA_URL_OPTIONS));
  };

function borderStyle(width) {
    var alias = "thin";

    if (width === 2) {
        alias = "medium";
    } else if (width === 3) {
        alias = "thick";
    }

    return alias;
}

function borderSideTemplate(name, style) {
    var result = "";

    if (style) {
        result += "<" + name + " style=\"" + borderStyle(style.size) + "\">";
        if (style.color) {
            result += "<color rgb=\"" + convertColor(style.color) + "\"/>";
        }
        result += "</" + name + ">";
    }

    return result;
}

function borderTemplate(border) {
    return "<border>" +
       borderSideTemplate("left", border.left) +
       borderSideTemplate("right", border.right) +
       borderSideTemplate("top", border.top) +
       borderSideTemplate("bottom", border.bottom) +
   "</border>";
}

var EMPTY_CELL = {};
function inflate(rows, mergedCells) {
    var rowData = [];
    var rowsByIndex = [];

    indexRows(rows, function(row, index) {
        var data = {
            _source: row,
            index: index,
            height: row.height,
            cells: []
        };

        rowData.push(data);
        rowsByIndex[index] = data;
    });

    var sorted = sortByIndex(rowData).slice(0);
    var ctx = {
        rowData: rowData,
        rowsByIndex: rowsByIndex,
        mergedCells: mergedCells
    };

    for (var i = 0; i < sorted.length; i++) {
        fillCells(sorted[i], ctx);
        delete sorted[i]._source;
    }

    return sortByIndex(rowData);
}

function indexRows(rows, callback) {
    for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        if (!row) {
            continue;
        }

        var index = row.index;
        if (typeof index !== "number") {
            index = i;
        }

        callback(row, index);
    }
}

function sortByIndex(items) {
    return items.sort(function(a, b) {
        return a.index - b.index;
    });
}

function pushUnique(array, el) {
    if (array.indexOf(el) < 0) {
        array.push(el);
    }
}

function getSpan(mergedCells, ref) {
    for (var i = 0; i < mergedCells.length; ++i) {
        var range = mergedCells[i];
        var a = range.split(":");
        var topLeft = a[0];
        if (topLeft === ref) {
            var bottomRight = a[1];
            topLeft = parseRef(topLeft);
            bottomRight = parseRef(bottomRight);
            return {
                rowSpan: bottomRight.row - topLeft.row + 1,
                colSpan: bottomRight.col - topLeft.col + 1
            };
        }
    }
}

function parseRef(ref) {
    function getcol(str) {
        var upperStr = str.toUpperCase();
        var col = 0;
        for (var i = 0; i < upperStr.length; ++i) {
            col = col * 26 + upperStr.charCodeAt(i) - 64;
        }
        return col - 1;
    }

    function getrow(str) {
        return parseInt(str, 10) - 1;
    }

    var m = /^([a-z]+)(\d+)$/i.exec(ref);
    return {
        row: getrow(m[2]),
        col: getcol(m[1])
    };
}

function fillCells(data, ctx) {
    var row = data._source;
    var rowIndex = data.index;
    var cells = row.cells;
    var cellData = data.cells;

    if (!cells) {
        return;
    }

    for (var i = 0; i < cells.length; i++) {
        var cell = cells[i] || EMPTY_CELL;

        var rowSpan = cell.rowSpan || 1;
        var colSpan = cell.colSpan || 1;

        var cellIndex = insertCell(cellData, cell);
        var topLeftRef = ref(rowIndex, cellIndex);

        if (rowSpan === 1 && colSpan === 1) {
            // could still be merged: the spreadsheet does not send
            // rowSpan/colSpan, but mergedCells is already populated.
            // https://github.com/telerik/kendo-ui-core/issues/2401
            var tmp = getSpan(ctx.mergedCells, topLeftRef);
            if (tmp) {
                colSpan = tmp.colSpan;
                rowSpan = tmp.rowSpan;
            }
        }

        spanCell(cell, cellData, cellIndex, colSpan);

        if (rowSpan > 1 || colSpan > 1) {
            pushUnique(ctx.mergedCells,
                       topLeftRef + ":" + ref(rowIndex + rowSpan - 1,
                                              cellIndex + colSpan - 1));
        }

        if (rowSpan > 1) {
            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {
                var nextRow = ctx.rowsByIndex[ri];
                if (!nextRow) {
                    nextRow = ctx.rowsByIndex[ri] = { index: ri, cells: [] };
                    ctx.rowData.push(nextRow);
                }

                spanCell(cell, nextRow.cells, cellIndex - 1, colSpan + 1);
            }
        }
    }
}

function insertCell(data, cell) {
    var index;

    if (typeof cell.index === "number") {
        index = cell.index;
        insertCellAt(data, cell, cell.index);
    } else {
        index = appendCell(data, cell);
    }

    return index;
}

function insertCellAt(data, cell, index) {
    data[index] = cell;
}

function appendCell(data, cell) {
    var index = data.length;

    for (var i = 0; i < data.length + 1; i++) {
        if (!data[i]) {
            data[i] = cell;
            index = i;
            break;
        }
    }

    return index;
}

function spanCell(cell, row, startIndex, colSpan) {
    for (var i = 1; i < colSpan; i++) {
        var tmp = {
            borderTop    : cell.borderTop,
            borderRight  : cell.borderRight,
            borderBottom : cell.borderBottom,
            borderLeft   : cell.borderLeft
        };
        insertCellAt(row, tmp, startIndex + i);
    }
}

var SPREADSHEET_FILTERS = function (ref$1) {
  var ref = ref$1.ref;
  var columns = ref$1.columns;
  var generators = ref$1.generators;

  return ("\n<autoFilter ref=\"" + ref + "\">\n  " + (foreach(columns, function (col) { return ("\n    <filterColumn colId=\"" + (col.index) + "\">\n      " + (generators[col.filter](col)) + "\n    </filterColumn>\n  "); })) + "\n</autoFilter>");
};

var SPREADSHEET_CUSTOM_FILTER = function (ref) {
  var logic = ref.logic;
  var criteria = ref.criteria;

  return ("\n<customFilters " + (logic === 'and' ? 'and="1"' : '') + ">\n" + (foreach(criteria, function (f) {
    var op = spreadsheetFilters.customOperator(f);
    var val = spreadsheetFilters.customValue(f);
    return ("<customFilter " + (op ? ("operator=\"" + op + "\"") : '') + " val=\"" + val + "\"/>");
})) + "\n</customFilters>");
};

var SPREADSHEET_DYNAMIC_FILTER = function (ref) {
  var type = ref.type;

  return ("<dynamicFilter type=\"" + (spreadsheetFilters.dynamicFilterType(type)) + "\" />");
};

var SPREADSHEET_TOP_FILTER = function (ref) {
  var type = ref.type;
  var value = ref.value;

  return ("<top10 percent=\"" + (/percent$/i.test(type) ? 1 : 0) + "\"\n       top=\"" + (/^top/i.test(type) ? 1 : 0) + "\"\n       val=\"" + value + "\" />");
};

var SPREADSHEET_VALUE_FILTER = function (ref) {
    var blanks = ref.blanks;
    var values = ref.values;

    return ("<filters " + (blanks ? 'blank="1"' : '') + ">\n    " + (foreach(values, function (value) { return ("\n      <filter val=\"" + value + "\" />"); })) + "\n  </filters>");
};

function spreadsheetFilters(filter) {
    return SPREADSHEET_FILTERS({
        ref: filter.ref,
        columns: filter.columns,
        generators: {
            custom  : SPREADSHEET_CUSTOM_FILTER,
            dynamic : SPREADSHEET_DYNAMIC_FILTER,
            top     : SPREADSHEET_TOP_FILTER,
            value   : SPREADSHEET_VALUE_FILTER
        }
    });
}

spreadsheetFilters.customOperator = function(f) {
    return {
        eq  : "equal",
        gt  : "greaterThan",
        gte : "greaterThanOrEqual",
        lt  : "lessThan",
        lte : "lessThanOrEqual",
        ne  : "notEqual",

        // These are not in the spec, but seems to be how Excel does
        // it (see customValue below).  For the non-negated versions,
        // the operator attribute is missing completely.
        doesnotstartwith: "notEqual",
        doesnotendwith: "notEqual",
        doesnotcontain: "notEqual",
        doesnotmatch: "notEqual"
    }[f.operator.toLowerCase()];
};

spreadsheetFilters.customValue = function(f) {
    function esc(str) {
        return str.replace(/([*?])/g, "~$1");
    }

    switch (f.operator.toLowerCase()) {
        case "startswith":
        case "doesnotstartwith":
            return esc(f.value) + "*";

        case "endswith":
        case "doesnotendwith":
            return "*" + esc(f.value);

        case "contains":
        case "doesnotcontain":
            return "*" + esc(f.value) + "*";

        default:
            return f.value;
    }
};

spreadsheetFilters.dynamicFilterType = function(type) {
    return {
        quarter1  : "Q1",
        quarter2  : "Q2",
        quarter3  : "Q3",
        quarter4  : "Q4",
        january   : "M1",
        february  : "M2",
        march     : "M3",
        april     : "M4",
        may       : "M5",
        june      : "M6",
        july      : "M7",
        august    : "M8",
        september : "M9",
        october   : "M10",
        november  : "M11",
        december  : "M12"
    }[type.toLowerCase()] || type;
};

exports.ExcelExporter = ExcelExporter;
exports.IntlService = IntlService;
exports.TemplateService = TemplateService;
exports.Workbook = Workbook;
exports.Worksheet = Worksheet;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi91c3IvbG9jYWwvamVua2lucy93b3Jrc3BhY2Uva2VuZG8tb294bWxfcmVsZWFzZS9zcmMvc2VydmljZXMvdGVtcGxhdGUtc2VydmljZS5qcyIsIi91c3IvbG9jYWwvamVua2lucy93b3Jrc3BhY2Uva2VuZG8tb294bWxfcmVsZWFzZS9zcmMvdXRpbHMvZ2V0dGVyLmpzIiwiL3Vzci9sb2NhbC9qZW5raW5zL3dvcmtzcGFjZS9rZW5kby1vb3htbF9yZWxlYXNlL3NyYy91dGlscy9tYXAuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL2V4Y2VsLWV4cG9ydGVyLmpzIiwiL3Vzci9sb2NhbC9qZW5raW5zL3dvcmtzcGFjZS9rZW5kby1vb3htbF9yZWxlYXNlL3NyYy9zZXJ2aWNlcy9pbnRsLXNlcnZpY2UuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL3V0aWxzL2NyZWF0ZS16aXAuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL3V0aWxzL3RpbWUuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL29veG1sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBjdXJyZW50ID0ge1xuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59O1xuXG5jbGFzcyBUZW1wbGF0ZVNlcnZpY2Uge1xuICAgIHN0YXRpYyByZWdpc3Rlcih1c2VySW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgY3VycmVudCA9IHVzZXJJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgY29tcGlsZSh0ZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudC5jb21waWxlKHRlbXBsYXRlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRlbXBsYXRlU2VydmljZTsiLCJjb25zdCBGSUVMRF9SRUdFWCA9IC9cXFsoPzooXFxkKyl8WydcIl0oLio/KVsnXCJdKVxcXXwoKD86KD8hXFxbLio/XFxdfFxcLikuKSspL2c7XG5jb25zdCBnZXR0ZXJDYWNoZSA9IHt9O1xuY29uc3QgVU5ERUZJTkVEID0gJ3VuZGVmaW5lZCc7XG5cbmdldHRlckNhY2hlW1VOREVGSU5FRF0gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0dGVyKGZpZWxkKSB7XG4gICAgaWYgKGdldHRlckNhY2hlW2ZpZWxkXSkge1xuICAgICAgICByZXR1cm4gZ2V0dGVyQ2FjaGVbZmllbGRdO1xuICAgIH1cblxuICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuICAgIGZpZWxkLnJlcGxhY2UoRklFTERfUkVHRVgsIGZ1bmN0aW9uKG1hdGNoLCBpbmRleCwgaW5kZXhBY2Nlc3NvciwgZmllbGQpIHtcbiAgICAgICAgZmllbGRzLnB1c2godHlwZW9mIGluZGV4ICE9PSBVTkRFRklORUQgPyBpbmRleCA6IChpbmRleEFjY2Vzc29yIHx8IGZpZWxkKSk7XG4gICAgfSk7XG5cbiAgICBnZXR0ZXJDYWNoZVtmaWVsZF0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG9iajtcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRzLmxlbmd0aCAmJiByZXN1bHQ7IGlkeCsrKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbZmllbGRzW2lkeF1dO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGdldHRlckNhY2hlW2ZpZWxkXTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXAoYXJyYXksIGZ1bmMpIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChyZXN1bHQsIGVsLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGZ1bmMoZWwsIGkpO1xuICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCBbXSk7XG59IiwiaW1wb3J0IFRlbXBsYXRlU2VydmljZSBmcm9tICcuL3NlcnZpY2VzL3RlbXBsYXRlLXNlcnZpY2UnO1xuaW1wb3J0IGdldHRlciBmcm9tICcuL3V0aWxzL2dldHRlcic7XG5pbXBvcnQgbWFwIGZyb20gJy4vdXRpbHMvbWFwJztcblxuZnVuY3Rpb24gZGVmYXVsdEdyb3VwSGVhZGVyVGVtcGxhdGUoZGF0YSkge1xuICAgIHJldHVybiBgJHsgZGF0YS50aXRsZSB9OiAkeyBkYXRhLnZhbHVlIH1gO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheShsZW5ndGgsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGNhbGxiYWNrKGlkeCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmNsYXNzIEV4Y2VsRXhwb3J0ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5jb2x1bW5zID0gdGhpcy5fdHJpbUNvbHVtbnMob3B0aW9ucy5jb2x1bW5zIHx8IFtdKTtcblxuICAgICAgICB0aGlzLmFsbENvbHVtbnMgPSBtYXAodGhpcy5fbGVhZkNvbHVtbnMob3B0aW9ucy5jb2x1bW5zIHx8IFtdKSwgdGhpcy5fcHJlcGFyZUNvbHVtbik7XG5cbiAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5hbGxDb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuICFjb2x1bW4uaGlkZGVuOyB9KTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmRhdGEgPSBvcHRpb25zLmRhdGEgfHwgW107XG4gICAgICAgIHRoaXMuYWdncmVnYXRlcyA9IG9wdGlvbnMuYWdncmVnYXRlcyB8fCB7fTtcbiAgICAgICAgdGhpcy5ncm91cHMgPSBbXS5jb25jYXQob3B0aW9ucy5ncm91cHMgfHwgW10pO1xuICAgICAgICB0aGlzLmhpZXJhcmNoeSA9IG9wdGlvbnMuaGllcmFyY2h5O1xuICAgIH1cblxuICAgIHdvcmtib29rKCkge1xuICAgICAgICBjb25zdCB3b3JrYm9vayA9IHtcbiAgICAgICAgICAgIHNoZWV0czogWyB7XG4gICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5fY29sdW1ucygpLFxuICAgICAgICAgICAgICAgIHJvd3M6IHRoaXMuaGllcmFyY2h5ID8gdGhpcy5faGllcmFyY2h5Um93cygpIDogdGhpcy5fcm93cygpLFxuICAgICAgICAgICAgICAgIGZyZWV6ZVBhbmU6IHRoaXMuX2ZyZWV6ZVBhbmUoKSxcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHRoaXMuX2ZpbHRlcigpXG4gICAgICAgICAgICB9IF1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gd29ya2Jvb2s7XG4gICAgfVxuXG4gICAgX3RyaW1Db2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbHVtbnMuZmlsdGVyKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBCb29sZWFuKGNvbHVtbi5maWVsZCk7XG5cbiAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fdHJpbUNvbHVtbnMoY29sdW1uLmNvbHVtbnMpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9sZWFmQ29sdW1ucyhjb2x1bW5zKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGlmICghY29sdW1uc1tpZHhdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjb2x1bW5zW2lkeF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuX2xlYWZDb2x1bW5zKGNvbHVtbnNbaWR4XS5jb2x1bW5zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIF9wcmVwYXJlQ29sdW1uKGNvbHVtbikge1xuICAgICAgICBpZiAoIWNvbHVtbi5maWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmFsdWUgPSBmdW5jdGlvbihkYXRhSXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGdldHRlcihjb2x1bW4uZmllbGQsIHRydWUpKGRhdGFJdGVtKTtcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgdmFsdWVzID0gbnVsbDtcblxuICAgICAgICBpZiAoY29sdW1uLnZhbHVlcykge1xuICAgICAgICAgICAgdmFsdWVzID0ge307XG5cbiAgICAgICAgICAgIGNvbHVtbi52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2l0ZW0udmFsdWVdID0gaXRlbS50ZXh0O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhbHVlID0gZnVuY3Rpb24oZGF0YUl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzW2dldHRlcihjb2x1bW4uZmllbGQsIHRydWUpKGRhdGFJdGVtKV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbHVtbiwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgICAgICBncm91cEhlYWRlclRlbXBsYXRlOiBjb2x1bW4uZ3JvdXBIZWFkZXJUZW1wbGF0ZSA/IFRlbXBsYXRlU2VydmljZS5jb21waWxlKGNvbHVtbi5ncm91cEhlYWRlclRlbXBsYXRlKSA6IGRlZmF1bHRHcm91cEhlYWRlclRlbXBsYXRlLFxuICAgICAgICAgICAgZ3JvdXBGb290ZXJUZW1wbGF0ZTogY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgPyBUZW1wbGF0ZVNlcnZpY2UuY29tcGlsZShjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSkgOiBudWxsLFxuICAgICAgICAgICAgZm9vdGVyVGVtcGxhdGU6IGNvbHVtbi5mb290ZXJUZW1wbGF0ZSA/IFRlbXBsYXRlU2VydmljZS5jb21waWxlKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSkgOiBudWxsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9maWx0ZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVwdGggPSB0aGlzLl9kZXB0aCgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tOiBkZXB0aCxcbiAgICAgICAgICAgIHRvOiBkZXB0aCArIHRoaXMuY29sdW1ucy5sZW5ndGggLSAxXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2NyZWF0ZVBhZGRpbmdDZWxscyhsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFycmF5KGxlbmd0aCwgKCkgPT4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkZmRmZGZcIixcbiAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIlxuICAgICAgICB9LCB0aGlzLm9wdGlvbnMucGFkZGluZ0NlbGxPcHRpb25zKSk7XG4gICAgfVxuXG4gICAgX2RhdGFSb3coZGF0YUl0ZW0sIGxldmVsLCBkZXB0aCkge1xuICAgICAgICBjb25zdCBjZWxscyA9IHRoaXMuX2NyZWF0ZVBhZGRpbmdDZWxscyhsZXZlbCk7XG5cbiAgICAgICAgLy8gZ3JvdXBlZFxuICAgICAgICBpZiAoZGVwdGggJiYgZGF0YUl0ZW0uaXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IHRoaXMuYWxsQ29sdW1ucy5maWx0ZXIoZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5maWVsZCA9PT0gZGF0YUl0ZW0uZmllbGQ7XG4gICAgICAgICAgICB9KVswXTtcblxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBjb2x1bW4gJiYgY29sdW1uLnRpdGxlID8gY29sdW1uLnRpdGxlIDogZGF0YUl0ZW0uZmllbGQ7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGNvbHVtbiA/IGNvbHVtbi5ncm91cEhlYWRlclRlbXBsYXRlIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBkYXRhSXRlbS5maWVsZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uICYmIGNvbHVtbi52YWx1ZXMgPyBjb2x1bW4udmFsdWVzW2RhdGFJdGVtLnZhbHVlXSA6IGRhdGFJdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZXM6IGRhdGFJdGVtLmFnZ3JlZ2F0ZXMsXG4gICAgICAgICAgICAgICAgaXRlbXM6IGRhdGFJdGVtLml0ZW1zXG4gICAgICAgICAgICB9LCBkYXRhSXRlbS5hZ2dyZWdhdGVzW2RhdGFJdGVtLmZpZWxkXSk7XG5cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGAkeyB0aXRsZSB9OiAkeyBkYXRhSXRlbS52YWx1ZSB9YDtcblxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0ZW1wbGF0ZShncm91cCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNlbGxzLnB1c2goT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIixcbiAgICAgICAgICAgICAgICBjb2xTcGFuOiB0aGlzLmNvbHVtbnMubGVuZ3RoICsgZGVwdGggLSBsZXZlbFxuICAgICAgICAgICAgfSwgKGNvbHVtbiB8fCB7fSkuZ3JvdXBIZWFkZXJDZWxsT3B0aW9ucykpO1xuXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGhpcy5fZGF0YVJvd3MoZGF0YUl0ZW0uaXRlbXMsIGxldmVsICsgMSk7XG5cbiAgICAgICAgICAgIHJvd3MudW5zaGlmdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJncm91cC1oZWFkZXJcIixcbiAgICAgICAgICAgICAgICBjZWxsczogY2VsbHNcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcm93cy5jb25jYXQodGhpcy5fZm9vdGVyKGRhdGFJdGVtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhQ2VsbHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBjZWxsSWR4ID0gMDsgY2VsbElkeCA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGNlbGxJZHgrKykge1xuICAgICAgICAgICAgZGF0YUNlbGxzW2NlbGxJZHhdID0gdGhpcy5fY2VsbChkYXRhSXRlbSwgdGhpcy5jb2x1bW5zW2NlbGxJZHhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhpZXJhcmNoeSkge1xuICAgICAgICAgICAgZGF0YUNlbGxzWzBdLmNvbFNwYW4gPSBkZXB0aCAtIGxldmVsICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbIHtcbiAgICAgICAgICAgIHR5cGU6IFwiZGF0YVwiLFxuICAgICAgICAgICAgY2VsbHM6IGNlbGxzLmNvbmNhdChkYXRhQ2VsbHMpXG4gICAgICAgIH0gXTtcbiAgICB9XG5cbiAgICBfZGF0YVJvd3MoZGF0YUl0ZW1zLCBsZXZlbCkge1xuICAgICAgICBjb25zdCBkZXB0aCA9IHRoaXMuX2RlcHRoKCk7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBkYXRhSXRlbXMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2RhdGFSb3coZGF0YUl0ZW1zW2lkeF0sIGxldmVsLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hpZXJhcmNoeVJvd3MoKSB7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy5fZGVwdGgoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgY29uc3QgaXRlbUxldmVsID0gdGhpcy5oaWVyYXJjaHkuaXRlbUxldmVsO1xuICAgICAgICBjb25zdCBoYXNGb290ZXIgPSB0aGlzLl9oYXNGb290ZXJUZW1wbGF0ZSgpO1xuICAgICAgICBjb25zdCByb3dzID0gW107XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgICAgbGV0IHByZXZpb3VzTGV2ZWwgPSAwO1xuICAgICAgICBsZXQgcHJldmlvdXNJdGVtSWQ7XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZGF0YS5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZGF0YVtpZHhdO1xuICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBpdGVtTGV2ZWwoaXRlbSk7XG5cbiAgICAgICAgICAgIGlmIChoYXNGb290ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPiBwcmV2aW91c0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaCh7IGlkOiBwcmV2aW91c0l0ZW1JZCwgbGV2ZWw6IHByZXZpb3VzTGV2ZWwgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZXZlbCA8IHByZXZpb3VzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2hpZXJhcmNoeUZvb3RlclJvd3MocGFyZW50cywgbGV2ZWwsIGRlcHRoKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJldmlvdXNMZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkID0gaXRlbS5pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2RhdGFSb3coaXRlbSwgbGV2ZWwgKyAxLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc0Zvb3Rlcikge1xuICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2hpZXJhcmNoeUZvb3RlclJvd3MocGFyZW50cywgMCwgZGVwdGgpKTtcblxuICAgICAgICAgICAgY29uc3Qgcm9vdEFnZ3JlZ2F0ZSA9IGRhdGEubGVuZ3RoID8gdGhpcy5hZ2dyZWdhdGVzW2RhdGFbMF0ucGFyZW50SWRdIDoge307XG4gICAgICAgICAgICByb3dzLnB1c2godGhpcy5faGllcmFyY2h5Rm9vdGVyKHJvb3RBZ2dyZWdhdGUsIDAsIGRlcHRoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wcmVwZW5kSGVhZGVyUm93cyhyb3dzKTtcblxuICAgICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBfaGllcmFyY2h5Rm9vdGVyUm93cyhwYXJlbnRzLCBjdXJyZW50TGV2ZWwsIGRlcHRoKSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhcmVudHMubGVuZ3RoICYmIHBhcmVudHNbcGFyZW50cy5sZW5ndGggLSAxXS5sZXZlbCA+PSBjdXJyZW50TGV2ZWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHBhcmVudHMucG9wKCk7XG4gICAgICAgICAgICByb3dzLnB1c2godGhpcy5faGllcmFyY2h5Rm9vdGVyKHRoaXMuYWdncmVnYXRlc1twYXJlbnQuaWRdLCBwYXJlbnQubGV2ZWwgKyAxLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hhc0Zvb3RlclRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5jb2x1bW5zO1xuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW5zW2lkeF0uZm9vdGVyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oaWVyYXJjaHlGb290ZXIoYWdncmVnYXRlcywgbGV2ZWwsIGRlcHRoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5jb2x1bW5zLm1hcChmdW5jdGlvbihjb2x1bW4sIGluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBjb2xTcGFuID0gaW5kZXggPyAxIDogZGVwdGggLSBsZXZlbCArIDE7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkZmRmZGZcIixcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICBjb2xTcGFuOiBjb2xTcGFuLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uLmZvb3RlclRlbXBsYXRlKE9iamVjdC5hc3NpZ24oe30sIChhZ2dyZWdhdGVzIHx8IHt9KVtjb2x1bW4uZmllbGRdKSlcbiAgICAgICAgICAgICAgICB9LCBjb2x1bW4uZm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgIGNvbFNwYW46IGNvbFNwYW5cbiAgICAgICAgICAgIH0sIGNvbHVtbi5mb290ZXJDZWxsT3B0aW9ucyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImZvb3RlclwiLFxuICAgICAgICAgICAgY2VsbHM6IHRoaXMuX2NyZWF0ZVBhZGRpbmdDZWxscyhsZXZlbCkuY29uY2F0KGNlbGxzKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9mb290ZXIoZGF0YUl0ZW0pIHtcbiAgICAgICAgY29uc3Qgcm93cyA9IFtdO1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmNvbHVtbnMuc29tZShjb2x1bW4gPT4gY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUpO1xuXG4gICAgICAgIGxldCB0ZW1wbGF0ZURhdGEsIGdyb3VwO1xuICAgICAgICBpZiAoZm9vdGVyKSB7XG4gICAgICAgICAgICBncm91cCA9IHtcbiAgICAgICAgICAgICAgICBncm91cDogeyBpdGVtczogZGF0YUl0ZW0uaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGRhdGFJdGVtLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhSXRlbS52YWx1ZSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGVtcGxhdGVEYXRhID0ge307XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhSXRlbS5hZ2dyZWdhdGVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVEYXRhW2tleV0gPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhSXRlbS5hZ2dyZWdhdGVzW2tleV0sIGdyb3VwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLmNvbHVtbnMubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGVtcGxhdGVEYXRhLCBkYXRhSXRlbS5hZ2dyZWdhdGVzW2NvbHVtbi5maWVsZF0sIGdyb3VwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjMzMzXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZShkYXRhKVxuICAgICAgICAgICAgICAgIH0sIGNvbHVtbi5ncm91cEZvb3RlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIlxuICAgICAgICAgICAgfSwgY29sdW1uLmdyb3VwRm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZm9vdGVyKSB7XG4gICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ3JvdXAtZm9vdGVyXCIsXG4gICAgICAgICAgICAgICAgY2VsbHM6IHRoaXMuX2NyZWF0ZVBhZGRpbmdDZWxscyh0aGlzLmdyb3Vwcy5sZW5ndGgpLmNvbmNhdChjZWxscylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2lzQ29sdW1uVmlzaWJsZShjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Zpc2libGVDb2x1bW5zKFsgY29sdW1uIF0pLmxlbmd0aCA+IDAgJiYgKGNvbHVtbi5maWVsZCB8fCBjb2x1bW4uY29sdW1ucyk7XG4gICAgfVxuXG4gICAgX3Zpc2libGVDb2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbHVtbnMuZmlsdGVyKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSAhY29sdW1uLmhpZGRlbjtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLl92aXNpYmxlQ29sdW1ucyhjb2x1bW4uY29sdW1ucykubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9oZWFkZXJSb3cocm93LCBncm91cHMpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHJvdy5jZWxscy5tYXAoZnVuY3Rpb24oY2VsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oY2VsbCwge1xuICAgICAgICAgICAgICAgIGNvbFNwYW46IGNlbGwuY29sU3BhbiA+IDEgPyBjZWxsLmNvbFNwYW4gOiAxLFxuICAgICAgICAgICAgICAgIHJvd1NwYW46IHJvdy5yb3dTcGFuID4gMSAmJiAhY2VsbC5jb2xTcGFuID8gcm93LnJvd1NwYW4gOiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XG4gICAgICAgICAgICBoZWFkZXJzWzBdLmNvbFNwYW4gPSB0aGlzLl9kZXB0aCgpICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImhlYWRlclwiLFxuICAgICAgICAgICAgY2VsbHM6IGNyZWF0ZUFycmF5KGdyb3Vwcy5sZW5ndGgsICgpID0+IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiIzdhN2E3YVwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZcIlxuICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLmhlYWRlclBhZGRpbmdDZWxsT3B0aW9ucykpLmNvbmNhdChoZWFkZXJzKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9wcmVwZW5kSGVhZGVyUm93cyhyb3dzKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclJvd3MgPSBbIHsgcm93U3BhbjogMSwgY2VsbHM6IFtdLCBpbmRleDogMCB9IF07XG5cbiAgICAgICAgdGhpcy5fcHJlcGFyZUhlYWRlclJvd3MoaGVhZGVyUm93cywgdGhpcy5vcHRpb25zLmNvbHVtbnMpO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IGhlYWRlclJvd3MubGVuZ3RoIC0gMTsgaWR4ID49IDA7IGlkeC0tKSB7XG4gICAgICAgICAgICByb3dzLnVuc2hpZnQodGhpcy5faGVhZGVyUm93KGhlYWRlclJvd3NbaWR4XSwgZ3JvdXBzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJlcGFyZUhlYWRlclJvd3Mocm93cywgY29sdW1ucywgcGFyZW50Q2VsbCwgcGFyZW50Um93KSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHBhcmVudFJvdyB8fCByb3dzW3Jvd3MubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCBjaGlsZFJvdyA9IHJvd3Nbcm93LmluZGV4ICsgMV07XG4gICAgICAgIGxldCB0b3RhbENvbFNwYW4gPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGNvbHVtbnMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gY29sdW1uc1tpZHhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ29sdW1uVmlzaWJsZShjb2x1bW4pKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiIzdhN2E3YVwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb2x1bW4udGl0bGUgfHwgY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBjb2xTcGFuOiAwXG4gICAgICAgICAgICAgICAgfSwgY29sdW1uLmhlYWRlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgICAgICByb3cuY2VsbHMucHVzaChjZWxsKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucyAmJiBjb2x1bW4uY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZFJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRSb3cgPSB7IHJvd1NwYW46IDAsIGNlbGxzOiBbXSwgaW5kZXg6IHJvd3MubGVuZ3RoIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goY2hpbGRSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IHRoaXMuX3RyaW1Db2x1bW5zKHRoaXMuX3Zpc2libGVDb2x1bW5zKGNvbHVtbi5jb2x1bW5zKSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlSGVhZGVyUm93cyhyb3dzLCBjb2x1bW4uY29sdW1ucywgY2VsbCwgY2hpbGRSb3cpO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbENvbFNwYW4gKz0gY2VsbC5jb2xTcGFuIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnJvd1NwYW4gPSByb3dzLmxlbmd0aCAtIHJvdy5pbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50Q2VsbCkge1xuICAgICAgICAgICAgcGFyZW50Q2VsbC5jb2xTcGFuICs9IHRvdGFsQ29sU3BhbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9yb3dzKCkge1xuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5fZGF0YVJvd3ModGhpcy5kYXRhLCAwKTtcblxuICAgICAgICBpZiAodGhpcy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fcHJlcGVuZEhlYWRlclJvd3Mocm93cyk7XG4gICAgICAgICAgICBsZXQgZm9vdGVyID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5jb2x1bW5zLm1hcCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBmb290ZXIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbHVtbi5mb290ZXJUZW1wbGF0ZShPYmplY3QuYXNzaWduKHt9LCB0aGlzLmFnZ3JlZ2F0ZXMsIHRoaXMuYWdncmVnYXRlc1tjb2x1bW4uZmllbGRdKSlcbiAgICAgICAgICAgICAgICAgICAgfSwgY29sdW1uLmZvb3RlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjMzMzXCJcbiAgICAgICAgICAgICAgICB9LCBjb2x1bW4uZm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChmb290ZXIpIHtcbiAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZvb3RlclwiLFxuICAgICAgICAgICAgICAgICAgICBjZWxsczogdGhpcy5fY3JlYXRlUGFkZGluZ0NlbGxzKHRoaXMuZ3JvdXBzLmxlbmd0aCkuY29uY2F0KGNlbGxzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hlYWRlckRlcHRoKGNvbHVtbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gMTtcbiAgICAgICAgbGV0IG1heCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgY29sdW1ucy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uc1tpZHhdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5faGVhZGVyRGVwdGgoY29sdW1uc1tpZHhdLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIGlmICh0ZW1wID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQgKyBtYXg7XG4gICAgfVxuXG4gICAgX2ZyZWV6ZVBhbmUoKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLl92aXNpYmxlQ29sdW1ucyh0aGlzLm9wdGlvbnMuY29sdW1ucyB8fCBbXSk7XG5cbiAgICAgICAgY29uc3QgY29sU3BsaXQgPSB0aGlzLl92aXNpYmxlQ29sdW1ucyh0aGlzLl90cmltQ29sdW1ucyh0aGlzLl9sZWFmQ29sdW1ucyhjb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4ubG9ja2VkO1xuICAgICAgICB9KSkpKS5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvd1NwbGl0OiB0aGlzLl9oZWFkZXJEZXB0aChjb2x1bW5zKSxcbiAgICAgICAgICAgIGNvbFNwbGl0OiBjb2xTcGxpdCA/IGNvbFNwbGl0ICsgdGhpcy5ncm91cHMubGVuZ3RoIDogMFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9jZWxsKGRhdGFJdGVtLCBjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdmFsdWU6IGNvbHVtbi52YWx1ZShkYXRhSXRlbSlcbiAgICAgICAgfSwgY29sdW1uLmNlbGxPcHRpb25zKTtcbiAgICB9XG5cbiAgICBfZGVwdGgoKSB7XG4gICAgICAgIGxldCBkZXB0aCA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XG4gICAgICAgICAgICBkZXB0aCA9IHRoaXMuaGllcmFyY2h5LmRlcHRoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVwdGggPSB0aGlzLmdyb3Vwcy5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVwdGg7XG4gICAgfVxuXG4gICAgX2NvbHVtbnMoKSB7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy5fZGVwdGgoKTtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IGNyZWF0ZUFycmF5KGRlcHRoLCAoKSA9PiAoeyB3aWR0aDogMjAgfSkpO1xuXG4gICAgICAgIHJldHVybiBjb2x1bW5zLmNvbmNhdCh0aGlzLmNvbHVtbnMubWFwKGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoY29sdW1uLndpZHRoLCAxMCksXG4gICAgICAgICAgICAgICAgYXV0b1dpZHRoOiBjb2x1bW4ud2lkdGggPyBmYWxzZSA6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV4Y2VsRXhwb3J0ZXI7XG4iLCJsZXQgY3VycmVudCA9IHtcbiAgICB0b1N0cmluZzogKHZhbHVlKSA9PiB2YWx1ZVxufTtcblxuY2xhc3MgSW50bFNlcnZpY2Uge1xuICAgIHN0YXRpYyByZWdpc3Rlcih1c2VySW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgY3VycmVudCA9IHVzZXJJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgdG9TdHJpbmcodmFsdWUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gY3VycmVudC50b1N0cmluZyh2YWx1ZSwgZm9ybWF0KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEludGxTZXJ2aWNlOyIsImltcG9ydCBKU1ppcCBmcm9tICdqc3ppcC9kaXN0L2pzemlwJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlWmlwKCkge1xuICAgIHJldHVybiBuZXcgSlNaaXAoKTtcbn0iLCIvLyBkYXRlIHBhY2tpbmcgdXRpbGl0aWVzIGZyb20gS2VuZG8gU3ByZWFkc2hlZXRcblxuLy8gSnVsaWFuIGRheXMgYWxnb3JpdGhtcyBmcm9tIGh0dHA6Ly93d3cuaGVybWV0aWMuY2gvY2FsX3N0dWQvamRuLmh0bSNjb21wXG5mdW5jdGlvbiBkYXRlVG9KdWxpYW5EYXlzKHksIG0sIGQpIHtcbiAgICByZXR1cm4gKCgxNDYxICogKHkgKyA0ODAwICsgKChtIC0gMTMpIC8gMTIgfCAwKSkpIC8gNCB8IDApICtcbiAgICAgICAgKCgzNjcgKiAobSAtIDEgLSAxMiAqICgobSAtIDEzKSAvIDEyIHwgMCkpKSAvIDEyIHwgMCkgLVxuICAgICAgICAoKDMgKiAoKCh5ICsgNDkwMCArICgobSAtIDEzKSAvIDEyIHwgMCkpIC8gMTAwIHwgMCkpKSAvIDQgfCAwKSArXG4gICAgICAgIGQgLSAzMjA3NTtcbn1cblxuLy8gVGhpcyB1c2VzIHRoZSBHb29nbGUgU3ByZWFkc2hlZXQgYXBwcm9hY2g6IHRyZWF0IDE4OTktMTItMzEgYXMgZGF5IDEsIGFsbG93aW5nIHRvIGF2b2lkXG4vLyBpbXBsZW1lbnRpbmcgdGhlIFwiTGVhcCBZZWFyIEJ1Z1wiIHlldCBzdGlsbCBiZSBFeGNlbCBjb21wYXRpYmxlIGZvciBkYXRlcyBzdGFydGluZyAxOTAwLTAzLTAxLlxuY29uc3QgQkFTRV9EQVRFID0gZGF0ZVRvSnVsaWFuRGF5cygxOTAwLCAwLCAtMSk7XG5cbmZ1bmN0aW9uIHBhY2tEYXRlKHllYXIsIG1vbnRoLCBkYXRlKSB7XG4gICAgcmV0dXJuIGRhdGVUb0p1bGlhbkRheXMoeWVhciwgbW9udGgsIGRhdGUpIC0gQkFTRV9EQVRFO1xufVxuXG5mdW5jdGlvbiBwYWNrVGltZShoaCwgbW0sIHNzLCBtcykge1xuICAgIHJldHVybiAoaGggKyAobW0gKyAoc3MgKyBtcyAvIDEwMDApIC8gNjApIC8gNjApIC8gMjQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGVUb1NlcmlhbChkYXRlKSB7XG4gICAgY29uc3QgdGltZSA9IHBhY2tUaW1lKGRhdGUuZ2V0SG91cnMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZ2V0U2Vjb25kcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLmdldE1pbGxpc2Vjb25kcygpKTtcbiAgICBjb25zdCBzZXJpYWwgPSBwYWNrRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5nZXRNb250aCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZ2V0RGF0ZSgpKTtcbiAgICByZXR1cm4gc2VyaWFsIDwgMCA/IHNlcmlhbCAtIDEgKyB0aW1lIDogc2VyaWFsICsgdGltZTtcbn1cbiIsImltcG9ydCBtYXAgZnJvbSAnLi91dGlscy9tYXAnO1xuaW1wb3J0IGNyZWF0ZVppcCBmcm9tICcuL3V0aWxzL2NyZWF0ZS16aXAnO1xuaW1wb3J0IEludGxTZXJ2aWNlIGZyb20gJy4vc2VydmljZXMvaW50bC1zZXJ2aWNlJztcbmltcG9ydCBkYXRlVG9TZXJpYWwgZnJvbSAnLi91dGlscy90aW1lJztcblxuY29uc3QgREFUQV9VUkxfUFJFRklYID0gXCJkYXRhOmFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0O2Jhc2U2NCxcIjtcbmNvbnN0IERBVEFfVVJMX09QVElPTlMgPSB7IGNvbXByZXNzaW9uOiBcIkRFRkxBVEVcIiwgdHlwZTogXCJiYXNlNjRcIiB9O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBrZXktc3BhY2luZywgbm8tYXJyb3ctY29uZGl0aW9uLCBpbmRlbnQsIG5vLW5lc3RlZC10ZXJuYXJ5LCBjb25zaXN0ZW50LXJldHVybiAqL1xuXG5mdW5jdGlvbiB0b0RhdGFVUkkoY29udGVudCkge1xuICAgIHJldHVybiBEQVRBX1VSTF9QUkVGSVggKyBjb250ZW50O1xufVxuXG5mdW5jdGlvbiBpbmRleE9mKHRoaW5nLCBhcnJheSkge1xuICAgIHJldHVybiBhcnJheS5pbmRleE9mKHRoaW5nKTtcbn1cblxuY29uc3QgcGFyc2VKU09OID0gSlNPTi5wYXJzZS5iaW5kKEpTT04pO1xuXG5mdW5jdGlvbiBFU0ModmFsKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWwpXG4gICAgICAgIC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIilcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgXCImbHQ7XCIpXG4gICAgICAgIC5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxcIi9nLCBcIiZxdW90O1wiKVxuICAgICAgICAucmVwbGFjZSgvXFwnL2csIFwiJiMzOTtcIik7XG59XG5cbmZ1bmN0aW9uIHJlcGVhdChjb3VudCwgZnVuYykge1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICBzdHIgKz0gZnVuYyhpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gZm9yZWFjaChhcnIsIGZ1bmMpIHtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICBzdHIgKz0gZnVuYyhhcnJbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuXG5jb25zdCBYTUxIRUFEID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHInO1xuXG5jb25zdCBSRUxTID0gYCR7WE1MSEVBRH1cbiAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzXCI+XG4gICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwIElkPVwicklkM1wiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2V4dGVuZGVkLXByb3BlcnRpZXNcIiBUYXJnZXQ9XCJkb2NQcm9wcy9hcHAueG1sXCIvPlxuICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZDJcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzL21ldGFkYXRhL2NvcmUtcHJvcGVydGllc1wiIFRhcmdldD1cImRvY1Byb3BzL2NvcmUueG1sXCIvPlxuICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZDFcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9vZmZpY2VEb2N1bWVudFwiIFRhcmdldD1cInhsL3dvcmtib29rLnhtbFwiLz5cbiAgICAgICAgICAgIDwvUmVsYXRpb25zaGlwcz5gO1xuXG5jb25zdCBDT1JFID0gKHsgY3JlYXRvciwgbGFzdE1vZGlmaWVkQnksIGNyZWF0ZWQsIG1vZGlmaWVkIH0pID0+IGAke1hNTEhFQUR9XG4gPGNwOmNvcmVQcm9wZXJ0aWVzIHhtbG5zOmNwPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9tZXRhZGF0YS9jb3JlLXByb3BlcnRpZXNcIlxuICAgeG1sbnM6ZGM9XCJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xL1wiIHhtbG5zOmRjdGVybXM9XCJodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvXCJcbiAgIHhtbG5zOmRjbWl0eXBlPVwiaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1wiIHhtbG5zOnhzaT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCI+XG4gICA8ZGM6Y3JlYXRvcj4ke0VTQyhjcmVhdG9yKX08L2RjOmNyZWF0b3I+XG4gICA8Y3A6bGFzdE1vZGlmaWVkQnk+JHtFU0MobGFzdE1vZGlmaWVkQnkpfTwvY3A6bGFzdE1vZGlmaWVkQnk+XG4gICA8ZGN0ZXJtczpjcmVhdGVkIHhzaTp0eXBlPVwiZGN0ZXJtczpXM0NEVEZcIj4ke0VTQyhjcmVhdGVkKX08L2RjdGVybXM6Y3JlYXRlZD5cbiAgIDxkY3Rlcm1zOm1vZGlmaWVkIHhzaTp0eXBlPVwiZGN0ZXJtczpXM0NEVEZcIj4ke0VTQyhtb2RpZmllZCl9PC9kY3Rlcm1zOm1vZGlmaWVkPlxuPC9jcDpjb3JlUHJvcGVydGllcz5gO1xuXG5jb25zdCBBUFAgPSAoeyBzaGVldHMgfSkgPT4gYCR7WE1MSEVBRH1cbjxQcm9wZXJ0aWVzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvZXh0ZW5kZWQtcHJvcGVydGllc1wiIHhtbG5zOnZ0PVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvZG9jUHJvcHNWVHlwZXNcIj5cbiAgPEFwcGxpY2F0aW9uPk1pY3Jvc29mdCBFeGNlbDwvQXBwbGljYXRpb24+XG4gIDxEb2NTZWN1cml0eT4wPC9Eb2NTZWN1cml0eT5cbiAgPFNjYWxlQ3JvcD5mYWxzZTwvU2NhbGVDcm9wPlxuICA8SGVhZGluZ1BhaXJzPlxuICAgIDx2dDp2ZWN0b3Igc2l6ZT1cIjJcIiBiYXNlVHlwZT1cInZhcmlhbnRcIj5cbiAgICAgIDx2dDp2YXJpYW50PlxuICAgICAgICA8dnQ6bHBzdHI+V29ya3NoZWV0czwvdnQ6bHBzdHI+XG4gICAgICA8L3Z0OnZhcmlhbnQ+XG4gICAgICA8dnQ6dmFyaWFudD5cbiAgICAgICAgPHZ0Omk0PiR7c2hlZXRzLmxlbmd0aH08L3Z0Omk0PlxuICAgICAgPC92dDp2YXJpYW50PlxuICAgIDwvdnQ6dmVjdG9yPlxuICA8L0hlYWRpbmdQYWlycz5cbiAgPFRpdGxlc09mUGFydHM+XG4gICAgPHZ0OnZlY3RvciBzaXplPVwiJHtzaGVldHMubGVuZ3RofVwiIGJhc2VUeXBlPVwibHBzdHJcIj4ke1xuICAgICAgZm9yZWFjaChzaGVldHMsIChzaGVldCwgaSkgPT5cbiAgICAgICAgc2hlZXQub3B0aW9ucy50aXRsZVxuICAgICAgICAgID8gYDx2dDpscHN0cj4ke0VTQyhzaGVldC5vcHRpb25zLnRpdGxlKX08L3Z0Omxwc3RyPmBcbiAgICAgICAgICA6IGA8dnQ6bHBzdHI+U2hlZXQke2kgKyAxfTwvdnQ6bHBzdHI+YFxuICAgICAgKVxuICAgIH08L3Z0OnZlY3Rvcj5cbiAgPC9UaXRsZXNPZlBhcnRzPlxuICA8TGlua3NVcFRvRGF0ZT5mYWxzZTwvTGlua3NVcFRvRGF0ZT5cbiAgPFNoYXJlZERvYz5mYWxzZTwvU2hhcmVkRG9jPlxuICA8SHlwZXJsaW5rc0NoYW5nZWQ+ZmFsc2U8L0h5cGVybGlua3NDaGFuZ2VkPlxuICA8QXBwVmVyc2lvbj4xNC4wMzAwPC9BcHBWZXJzaW9uPlxuPC9Qcm9wZXJ0aWVzPmA7XG5cbmNvbnN0IENPTlRFTlRfVFlQRVMgPSAoeyBjb3VudCB9KSA9PiBgJHtYTUxIRUFEfVxuPFR5cGVzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9jb250ZW50LXR5cGVzXCI+XG4gIDxEZWZhdWx0IEV4dGVuc2lvbj1cInJlbHNcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLnJlbGF0aW9uc2hpcHMreG1sXCIgLz5cbiAgPERlZmF1bHQgRXh0ZW5zaW9uPVwieG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi94bWxcIiAvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvd29ya2Jvb2sueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldC5tYWluK3htbFwiIC8+XG4gIDxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC9zdHlsZXMueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zdHlsZXMreG1sXCIvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvc2hhcmVkU3RyaW5ncy54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoYXJlZFN0cmluZ3MreG1sXCIvPlxuICAke3JlcGVhdChjb3VudCwgaWR4ID0+XG4gICAgYDxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC93b3Jrc2hlZXRzL3NoZWV0JHtpZHggKyAxfS54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLndvcmtzaGVldCt4bWxcIiAvPmApfVxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIvZG9jUHJvcHMvY29yZS54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLmNvcmUtcHJvcGVydGllcyt4bWxcIiAvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIvZG9jUHJvcHMvYXBwLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LmV4dGVuZGVkLXByb3BlcnRpZXMreG1sXCIgLz5cbjwvVHlwZXM+YDtcblxuY29uc3QgV09SS0JPT0sgPSAoeyBzaGVldHMsIGZpbHRlck5hbWVzLCB1c2VyTmFtZXMgfSkgPT4gYCR7WE1MSEVBRH1cbjx3b3JrYm9vayB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIHhtbG5zOnI9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzXCI+XG4gIDxmaWxlVmVyc2lvbiBhcHBOYW1lPVwieGxcIiBsYXN0RWRpdGVkPVwiNVwiIGxvd2VzdEVkaXRlZD1cIjVcIiBydXBCdWlsZD1cIjkzMDNcIiAvPlxuICA8d29ya2Jvb2tQciBkZWZhdWx0VGhlbWVWZXJzaW9uPVwiMTI0MjI2XCIgLz5cbiAgPGJvb2tWaWV3cz5cbiAgICA8d29ya2Jvb2tWaWV3IHhXaW5kb3c9XCIyNDBcIiB5V2luZG93PVwiNDVcIiB3aW5kb3dXaWR0aD1cIjE4MTk1XCIgd2luZG93SGVpZ2h0PVwiNzk5NVwiIC8+XG4gIDwvYm9va1ZpZXdzPlxuICA8c2hlZXRzPlxuICAke2ZvcmVhY2goc2hlZXRzLCAoeyBvcHRpb25zIH0sIGkpID0+IHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lIHx8IG9wdGlvbnMudGl0bGUgfHwgYFNoZWV0JHtpICsgMX1gO1xuICAgIHJldHVybiBgPHNoZWV0IG5hbWU9XCIke0VTQyhuYW1lKX1cIiBzaGVldElkPVwiJHtpICsgMX1cIiByOmlkPVwicklkJHtpICsgMX1cIiAvPmA7XG4gIH0pfVxuICA8L3NoZWV0cz5cbiAgJHtmaWx0ZXJOYW1lcy5sZW5ndGggfHwgdXNlck5hbWVzLmxlbmd0aCA/IGBcbiAgICA8ZGVmaW5lZE5hbWVzPlxuICAgICAgJHtmb3JlYWNoKGZpbHRlck5hbWVzLCAoZikgPT4gYFxuICAgICAgICAgPGRlZmluZWROYW1lIG5hbWU9XCJfeGxubS5fRmlsdGVyRGF0YWJhc2VcIiBoaWRkZW49XCIxXCIgbG9jYWxTaGVldElkPVwiJHtmLmxvY2FsU2hlZXRJZH1cIj4ke0VTQyhmLm5hbWUpfSEke0VTQyhmLmZyb20pfToke0VTQyhmLnRvKX08L2RlZmluZWROYW1lPmApfVxuICAgICAgJHtmb3JlYWNoKHVzZXJOYW1lcywgKGYpID0+IGBcbiAgICAgICAgIDxkZWZpbmVkTmFtZSBuYW1lPVwiJHtmLm5hbWV9XCIgaGlkZGVuPVwiJHtmLmhpZGRlbiA/IDEgOiAwfVwiICR7Zi5sb2NhbFNoZWV0SWQgIT0gbnVsbCA/IGBsb2NhbFNoZWV0SWQ9XCIke2YubG9jYWxTaGVldElkfVwiYCA6ICcnfT4ke0VTQyhmLnZhbHVlKX08L2RlZmluZWROYW1lPmApfVxuICAgIDwvZGVmaW5lZE5hbWVzPmAgOiAnJ31cbiAgPGNhbGNQciBmdWxsQ2FsY09uTG9hZD1cIjFcIiBjYWxjSWQ9XCIxNDU2MjFcIiAvPlxuPC93b3JrYm9vaz5gO1xuXG5jb25zdCBXT1JLU0hFRVQgPSAoe1xuICAgIGZyb3plbkNvbHVtbnMsXG4gICAgZnJvemVuUm93cyxcbiAgICBjb2x1bW5zLFxuICAgIGRlZmF1bHRzLFxuICAgIGRhdGEsXG4gICAgaW5kZXgsXG4gICAgbWVyZ2VDZWxscyxcbiAgICBhdXRvRmlsdGVyLFxuICAgIGZpbHRlcixcbiAgICBzaG93R3JpZExpbmVzLFxuICAgIGh5cGVybGlua3MsXG4gICAgdmFsaWRhdGlvbnMsXG4gICAgZGVmYXVsdENlbGxTdHlsZUlkLFxuICAgIHJ0bFxufSkgPT4gYCR7WE1MSEVBRH1cbjx3b3Jrc2hlZXQgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczptYz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2XCIgeG1sbnM6cj1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHNcIiB4bWxuczp4MTRhYz1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjXCIgbWM6SWdub3JhYmxlPVwieDE0YWNcIj5cbiAgIDxkaW1lbnNpb24gcmVmPVwiQTFcIiAvPlxuXG4gICA8c2hlZXRWaWV3cz5cbiAgICAgPHNoZWV0VmlldyAkeyBydGwgPyAncmlnaHRUb0xlZnQ9XCIxXCInIDogJycgfSAke2luZGV4ID09PSAwID8gJ3RhYlNlbGVjdGVkPVwiMVwiJyA6ICcnfSB3b3JrYm9va1ZpZXdJZD1cIjBcIiAke3Nob3dHcmlkTGluZXMgPT09IGZhbHNlID8gJ3Nob3dHcmlkTGluZXM9XCIwXCInIDogJyd9PlxuICAgICAke2Zyb3plblJvd3MgfHwgZnJvemVuQ29sdW1ucyA/IGBcbiAgICAgICA8cGFuZSBzdGF0ZT1cImZyb3plblwiXG4gICAgICAgICAke2Zyb3plbkNvbHVtbnMgPyBgeFNwbGl0PVwiJHtmcm96ZW5Db2x1bW5zfVwiYCA6ICcnfVxuICAgICAgICAgJHtmcm96ZW5Sb3dzID8gYHlTcGxpdD1cIiR7ZnJvemVuUm93c31cImAgOiAnJ31cbiAgICAgICAgIHRvcExlZnRDZWxsPVwiJHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgKGZyb3plbkNvbHVtbnMgfHwgMCkpICsgKChmcm96ZW5Sb3dzIHx8IDApICsgMSl9XCJcbiAgICAgICAvPmAgOiAnJ31cbiAgICAgPC9zaGVldFZpZXc+XG4gICA8L3NoZWV0Vmlld3M+XG5cbiAgIDxzaGVldEZvcm1hdFByIHgxNGFjOmR5RGVzY2VudD1cIjAuMjVcIiBkZWZhdWx0Um93SGVpZ2h0PVwiJHtkZWZhdWx0cy5yb3dIZWlnaHQgPyBkZWZhdWx0cy5yb3dIZWlnaHQgKiAwLjc1IDogMTV9XCJcbiAgICAgJHtkZWZhdWx0cy5jb2x1bW5XaWR0aCA/IGBkZWZhdWx0Q29sV2lkdGg9XCIke3RvV2lkdGgoZGVmYXVsdHMuY29sdW1uV2lkdGgpfVwiYCA6ICcnfSAvPlxuXG4gICAke2RlZmF1bHRDZWxsU3R5bGVJZCAhPSBudWxsIHx8IChjb2x1bW5zICYmIGNvbHVtbnMubGVuZ3RoID4gMCkgPyBgXG4gICAgIDxjb2xzPlxuICAgICAgICR7IWNvbHVtbnMgfHwgIWNvbHVtbnMubGVuZ3RoID8gYFxuICAgICAgICAgPGNvbCBtaW49XCIxXCIgbWF4PVwiMTYzODRcIiBzdHlsZT1cIiR7ZGVmYXVsdENlbGxTdHlsZUlkfVwiXG4gICAgICAgICAgICAgICR7ZGVmYXVsdHMuY29sdW1uV2lkdGggPyBgd2lkdGg9XCIke3RvV2lkdGgoZGVmYXVsdHMuY29sdW1uV2lkdGgpfVwiYCA6ICcnfSAvPiBgIDogJyd9XG4gICAgICAgJHtmb3JlYWNoKGNvbHVtbnMsIChjb2x1bW4sIGNpKSA9PiB7XG4gICAgICAgICBjb25zdCBjb2x1bW5JbmRleCA9IHR5cGVvZiBjb2x1bW4uaW5kZXggPT09IFwibnVtYmVyXCIgPyBjb2x1bW4uaW5kZXggKyAxIDogKGNpICsgMSk7XG4gICAgICAgICBpZiAoY29sdW1uLndpZHRoID09PSAwKSB7XG4gICAgICAgICAgIHJldHVybiBgPGNvbCAke2RlZmF1bHRDZWxsU3R5bGVJZCAhPSBudWxsID8gYHN0eWxlPVwiJHtkZWZhdWx0Q2VsbFN0eWxlSWR9XCJgIDogJyd9XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIke2NvbHVtbkluZGV4fVwiIG1heD1cIiR7Y29sdW1uSW5kZXh9XCIgaGlkZGVuPVwiMVwiIGN1c3RvbVdpZHRoPVwiMVwiIC8+YDtcbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBgPGNvbCAke2RlZmF1bHRDZWxsU3R5bGVJZCAhPSBudWxsID8gYHN0eWxlPVwiJHtkZWZhdWx0Q2VsbFN0eWxlSWR9XCJgIDogJyd9XG4gICAgICAgICAgICAgICAgICAgICAgbWluPVwiJHtjb2x1bW5JbmRleH1cIiBtYXg9XCIke2NvbHVtbkluZGV4fVwiIGN1c3RvbVdpZHRoPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgJHtjb2x1bW4uYXV0b1dpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gYHdpZHRoPVwiJHsoKGNvbHVtbi53aWR0aCAqIDcgKyA1KSAvIDcgKiAyNTYpIC8gMjU2fVwiIGJlc3RGaXQ9XCIxXCJgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogYHdpZHRoPVwiJHt0b1dpZHRoKGNvbHVtbi53aWR0aCl9XCJgfSAvPmA7XG4gICAgICAgfSl9XG4gICAgIDwvY29scz5gIDogJyd9XG5cbiAgIDxzaGVldERhdGE+XG4gICAgICR7Zm9yZWFjaChkYXRhLCAocm93LCByaSkgPT4ge1xuICAgICAgIGNvbnN0IHJvd0luZGV4ID0gdHlwZW9mIHJvdy5pbmRleCA9PT0gXCJudW1iZXJcIiA/IHJvdy5pbmRleCArIDEgOiAocmkgKyAxKTtcbiAgICAgICByZXR1cm4gYFxuICAgICAgICAgPHJvdyByPVwiJHtyb3dJbmRleH1cIiB4MTRhYzpkeURlc2NlbnQ9XCIwLjI1XCJcbiAgICAgICAgICAgICAgJHtyb3cuaGVpZ2h0ID09PSAwID8gJ2hpZGRlbj1cIjFcIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcm93LmhlaWdodCA/IGBodD1cIiR7dG9IZWlnaHQocm93LmhlaWdodCl9XCIgY3VzdG9tSGVpZ2h0PVwiMVwiYCA6IFwiXCJ9PlxuICAgICAgICAgICAke2ZvcmVhY2gocm93LmRhdGEsIChjZWxsKSA9PiBgXG4gICAgICAgICAgICAgPGMgcj1cIiR7Y2VsbC5yZWZ9XCIgJHtjZWxsLnN0eWxlID8gYHM9XCIke2NlbGwuc3R5bGV9XCJgIDogJyd9ICR7Y2VsbC50eXBlID8gYHQ9XCIke2NlbGwudHlwZX1cImAgOiAnJ30+XG4gICAgICAgICAgICAgICAke2NlbGwuZm9ybXVsYSAhPSBudWxsID8gd3JpdGVGb3JtdWxhKGNlbGwuZm9ybXVsYSkgOiAnJ31cbiAgICAgICAgICAgICAgICR7Y2VsbC52YWx1ZSAhPSBudWxsID8gYDx2PiR7RVNDKGNlbGwudmFsdWUpfTwvdj5gIDogJyd9XG4gICAgICAgICAgICAgPC9jPmApfVxuICAgICAgICAgPC9yb3c+XG4gICAgICAgYDt9KX1cbiAgIDwvc2hlZXREYXRhPlxuXG4gICAke2F1dG9GaWx0ZXIgPyBgPGF1dG9GaWx0ZXIgcmVmPVwiJHthdXRvRmlsdGVyLmZyb219OiR7YXV0b0ZpbHRlci50b31cIi8+YFxuICAgICAgICAgICAgICAgIDogZmlsdGVyID8gc3ByZWFkc2hlZXRGaWx0ZXJzKGZpbHRlcikgOiAnJ31cblxuICAgJHttZXJnZUNlbGxzLmxlbmd0aCA/IGBcbiAgICAgPG1lcmdlQ2VsbHMgY291bnQ9XCIke21lcmdlQ2VsbHMubGVuZ3RofVwiPlxuICAgICAgICR7Zm9yZWFjaChtZXJnZUNlbGxzLCAocmVmKSA9PiBgPG1lcmdlQ2VsbCByZWY9XCIke3JlZn1cIi8+YCl9XG4gICAgIDwvbWVyZ2VDZWxscz5gIDogJyd9XG5cbiAgICR7dmFsaWRhdGlvbnMubGVuZ3RoID8gYFxuICAgICA8ZGF0YVZhbGlkYXRpb25zPlxuICAgICAgICR7Zm9yZWFjaCh2YWxpZGF0aW9ucywgKHZhbCkgPT4gYFxuICAgICAgICAgPGRhdGFWYWxpZGF0aW9uIHNxcmVmPVwiJHt2YWwuc3FyZWYuam9pbihcIiBcIil9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlPVwiJHt2YWwuc2hvd0Vycm9yTWVzc2FnZX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCIke0VTQyh2YWwudHlwZSl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAkeyB2YWwudHlwZSAhPT0gXCJsaXN0XCIgPyBgb3BlcmF0b3I9XCIke0VTQyh2YWwub3BlcmF0b3IpfVwiYCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93Qmxhbms9XCIke3ZhbC5hbGxvd0JsYW5rfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Ryb3BEb3duPVwiJHt2YWwuc2hvd0Ryb3BEb3dufVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgJHt2YWwuZXJyb3IgPyBgZXJyb3I9XCIke0VTQyh2YWwuZXJyb3IpfVwiYCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICR7dmFsLmVycm9yVGl0bGUgPyBgZXJyb3JUaXRsZT1cIiR7RVNDKHZhbC5lcnJvclRpdGxlKX1cImAgOiAnJ30+XG4gICAgICAgICAgICR7dmFsLmZvcm11bGExID8gYDxmb3JtdWxhMT4ke0VTQyh2YWwuZm9ybXVsYTEpfTwvZm9ybXVsYTE+YCA6ICcnfVxuICAgICAgICAgICAke3ZhbC5mb3JtdWxhMiA/IGA8Zm9ybXVsYTI+JHtFU0ModmFsLmZvcm11bGEyKX08L2Zvcm11bGEyPmAgOiAnJ31cbiAgICAgICAgIDwvZGF0YVZhbGlkYXRpb24+YCl9XG4gICAgIDwvZGF0YVZhbGlkYXRpb25zPmAgOiAnJ31cblxuICAgJHtoeXBlcmxpbmtzLmxlbmd0aCA/IGBcbiAgICAgPGh5cGVybGlua3M+XG4gICAgICAgJHtmb3JlYWNoKGh5cGVybGlua3MsIChsaW5rLCBoaSkgPT4gYFxuICAgICAgICAgPGh5cGVybGluayByZWY9XCIke2xpbmsucmVmfVwiIHI6aWQ9XCJySWQke2hpfVwiLz5gKX1cbiAgICAgPC9oeXBlcmxpbmtzPmAgOiAnJ31cblxuICAgPHBhZ2VNYXJnaW5zIGxlZnQ9XCIwLjdcIiByaWdodD1cIjAuN1wiIHRvcD1cIjAuNzVcIiBib3R0b209XCIwLjc1XCIgaGVhZGVyPVwiMC4zXCIgZm9vdGVyPVwiMC4zXCIgLz5cbjwvd29ya3NoZWV0PmA7XG5cbmNvbnN0IFdPUktCT09LX1JFTFMgPSAoeyBjb3VudCB9KSA9PiBgJHtYTUxIRUFEfVxuPFJlbGF0aW9uc2hpcHMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHNcIj5cbiAgJHtyZXBlYXQoY291bnQsIChpZHgpID0+IGBcbiAgICA8UmVsYXRpb25zaGlwIElkPVwicklkJHtpZHggKyAxfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3dvcmtzaGVldFwiIFRhcmdldD1cIndvcmtzaGVldHMvc2hlZXQke2lkeCArIDF9LnhtbFwiIC8+YCl9XG4gIDxSZWxhdGlvbnNoaXAgSWQ9XCJySWQke2NvdW50ICsgMX1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9zdHlsZXNcIiBUYXJnZXQ9XCJzdHlsZXMueG1sXCIgLz5cbiAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7Y291bnQgKyAyfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3NoYXJlZFN0cmluZ3NcIiBUYXJnZXQ9XCJzaGFyZWRTdHJpbmdzLnhtbFwiIC8+XG48L1JlbGF0aW9uc2hpcHM+YDtcblxuY29uc3QgV09SS1NIRUVUX1JFTFMgPSAoeyBoeXBlcmxpbmtzIH0pID0+IGAke1hNTEhFQUR9XG48UmVsYXRpb25zaGlwcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwc1wiPlxuICAke2ZvcmVhY2goaHlwZXJsaW5rcywgKGxpbmssIGkpID0+IGBcbiAgICA8UmVsYXRpb25zaGlwIElkPVwicklkJHtpfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2h5cGVybGlua1wiIFRhcmdldD1cIiR7RVNDKGxpbmsudGFyZ2V0KX1cIiBUYXJnZXRNb2RlPVwiRXh0ZXJuYWxcIiAvPmApfVxuPC9SZWxhdGlvbnNoaXBzPmA7XG5cbmNvbnN0IFNIQVJFRF9TVFJJTkdTID0gKHsgY291bnQsIHVuaXF1ZUNvdW50LCBpbmRleGVzIH0pID0+IGAke1hNTEhFQUR9XG48c3N0IHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgY291bnQ9XCIke2NvdW50fVwiIHVuaXF1ZUNvdW50PVwiJHt1bmlxdWVDb3VudH1cIj5cbiAgJHtmb3JlYWNoKE9iamVjdC5rZXlzKGluZGV4ZXMpLCAoaW5kZXgpID0+IGBcbiAgICA8c2k+PHQgeG1sOnNwYWNlPVwicHJlc2VydmVcIj4ke0VTQyhpbmRleC5zdWJzdHJpbmcoMSkpfTwvdD48L3NpPmApfVxuPC9zc3Q+YDtcblxuY29uc3QgU1RZTEVTID0gKHtcbiAgICBmb3JtYXRzLFxuICAgIGZvbnRzLFxuICAgIGZpbGxzLFxuICAgIGJvcmRlcnMsXG4gICAgc3R5bGVzXG59KSA9PiBgJHtYTUxIRUFEfVxuPHN0eWxlU2hlZXRcbiAgICB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiXG4gICAgeG1sbnM6bWM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNlwiXG4gICAgbWM6SWdub3JhYmxlPVwieDE0YWNcIlxuICAgIHhtbG5zOngxNGFjPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDA5LzkvYWNcIj5cbiAgPG51bUZtdHMgY291bnQ9XCIke2Zvcm1hdHMubGVuZ3RofVwiPlxuICAke2ZvcmVhY2goZm9ybWF0cywgKGZvcm1hdCwgZmkpID0+IGBcbiAgICA8bnVtRm10IGZvcm1hdENvZGU9XCIke0VTQyhmb3JtYXQuZm9ybWF0KX1cIiBudW1GbXRJZD1cIiR7MTY1ICsgZml9XCIgLz5gKX1cbiAgPC9udW1GbXRzPlxuICA8Zm9udHMgY291bnQ9XCIke2ZvbnRzLmxlbmd0aCArIDF9XCIgeDE0YWM6a25vd25Gb250cz1cIjFcIj5cbiAgICA8Zm9udD5cbiAgICAgICA8c3ogdmFsPVwiMTFcIiAvPlxuICAgICAgIDxjb2xvciB0aGVtZT1cIjFcIiAvPlxuICAgICAgIDxuYW1lIHZhbD1cIkNhbGlicmlcIiAvPlxuICAgICAgIDxmYW1pbHkgdmFsPVwiMlwiIC8+XG4gICAgICAgPHNjaGVtZSB2YWw9XCJtaW5vclwiIC8+XG4gICAgPC9mb250PlxuICAgICR7Zm9yZWFjaChmb250cywgKGZvbnQpID0+IGBcbiAgICA8Zm9udD5cbiAgICAgIDxzeiB2YWw9XCIke2ZvbnQuZm9udFNpemUgfHwgMTF9XCIgLz5cbiAgICAgICR7Zm9udC5ib2xkID8gJzxiLz4nIDogJyd9XG4gICAgICAke2ZvbnQuaXRhbGljID8gJzxpLz4nIDogJyd9XG4gICAgICAke2ZvbnQudW5kZXJsaW5lID8gJzx1Lz4nIDogJyd9XG4gICAgICAke2ZvbnQuY29sb3IgPyBgPGNvbG9yIHJnYj1cIiR7RVNDKGZvbnQuY29sb3IpfVwiIC8+YCA6ICc8Y29sb3IgdGhlbWU9XCIxXCIgLz4nfVxuICAgICAgJHtmb250LmZvbnRGYW1pbHkgPyBgXG4gICAgICAgIDxuYW1lIHZhbD1cIiR7RVNDKGZvbnQuZm9udEZhbWlseSl9XCIgLz5cbiAgICAgICAgPGZhbWlseSB2YWw9XCIyXCIgLz5cbiAgICAgIGAgOiBgXG4gICAgICAgIDxuYW1lIHZhbD1cIkNhbGlicmlcIiAvPlxuICAgICAgICA8ZmFtaWx5IHZhbD1cIjJcIiAvPlxuICAgICAgICA8c2NoZW1lIHZhbD1cIm1pbm9yXCIgLz5cbiAgICAgIGB9XG4gICAgPC9mb250PmApfVxuICA8L2ZvbnRzPlxuICA8ZmlsbHMgY291bnQ9XCIke2ZpbGxzLmxlbmd0aCArIDJ9XCI+XG4gICAgICA8ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJub25lXCIvPjwvZmlsbD5cbiAgICAgIDxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cImdyYXkxMjVcIi8+PC9maWxsPlxuICAgICR7Zm9yZWFjaChmaWxscywgKGZpbGwpID0+IGBcbiAgICAgICR7ZmlsbC5iYWNrZ3JvdW5kID8gYFxuICAgICAgICA8ZmlsbD5cbiAgICAgICAgICA8cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJzb2xpZFwiPlxuICAgICAgICAgICAgICA8ZmdDb2xvciByZ2I9XCIke0VTQyhmaWxsLmJhY2tncm91bmQpfVwiLz5cbiAgICAgICAgICA8L3BhdHRlcm5GaWxsPlxuICAgICAgICA8L2ZpbGw+XG4gICAgICBgIDogJyd9YCl9XG4gIDwvZmlsbHM+XG4gIDxib3JkZXJzIGNvdW50PVwiJHtib3JkZXJzLmxlbmd0aCArIDF9XCI+XG4gICAgPGJvcmRlcj48bGVmdC8+PHJpZ2h0Lz48dG9wLz48Ym90dG9tLz48ZGlhZ29uYWwvPjwvYm9yZGVyPlxuICAgICR7Zm9yZWFjaChib3JkZXJzLCBib3JkZXJUZW1wbGF0ZSl9XG4gIDwvYm9yZGVycz5cbiAgPGNlbGxTdHlsZVhmcyBjb3VudD1cIjFcIj5cbiAgICA8eGYgYm9yZGVySWQ9XCIwXCIgZmlsbElkPVwiMFwiIGZvbnRJZD1cIjBcIiAvPlxuICA8L2NlbGxTdHlsZVhmcz5cbiAgPGNlbGxYZnMgY291bnQ9XCIke3N0eWxlcy5sZW5ndGggKyAxfVwiPlxuICAgIDx4ZiBudW1GbXRJZD1cIjBcIiBmb250SWQ9XCIwXCIgZmlsbElkPVwiMFwiIGJvcmRlcklkPVwiMFwiIHhmSWQ9XCIwXCIgLz5cbiAgICAke2ZvcmVhY2goc3R5bGVzLCAoc3R5bGUpID0+IGBcbiAgICAgIDx4ZiB4ZklkPVwiMFwiXG4gICAgICAgICAgJHtzdHlsZS5mb250SWQgPyBgZm9udElkPVwiJHtzdHlsZS5mb250SWR9XCIgYXBwbHlGb250PVwiMVwiYCA6ICcnfVxuICAgICAgICAgICR7c3R5bGUuZmlsbElkID8gYGZpbGxJZD1cIiR7c3R5bGUuZmlsbElkfVwiIGFwcGx5RmlsbD1cIjFcImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLm51bUZtdElkID8gYG51bUZtdElkPVwiJHtzdHlsZS5udW1GbXRJZH1cIiBhcHBseU51bWJlckZvcm1hdD1cIjFcImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLnRleHRBbGlnbiB8fCBzdHlsZS52ZXJ0aWNhbEFsaWduIHx8IHN0eWxlLndyYXAgPyAnYXBwbHlBbGlnbm1lbnQ9XCIxXCInIDogJyd9XG4gICAgICAgICAgJHtzdHlsZS5ib3JkZXJJZCA/IGBib3JkZXJJZD1cIiR7c3R5bGUuYm9yZGVySWR9XCIgYXBwbHlCb3JkZXI9XCIxXCJgIDogJyd9PlxuICAgICAgICAke3N0eWxlLnRleHRBbGlnbiB8fCBzdHlsZS52ZXJ0aWNhbEFsaWduIHx8IHN0eWxlLndyYXAgPyBgXG4gICAgICAgIDxhbGlnbm1lbnRcbiAgICAgICAgICAke3N0eWxlLnRleHRBbGlnbiA/IGBob3Jpem9udGFsPVwiJHtFU0Moc3R5bGUudGV4dEFsaWduKX1cImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLnZlcnRpY2FsQWxpZ24gPyBgdmVydGljYWw9XCIke0VTQyhzdHlsZS52ZXJ0aWNhbEFsaWduKX1cImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLndyYXAgPyAnd3JhcFRleHQ9XCIxXCInIDogJyd9IC8+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgIDwveGY+XG4gICAgYCl9XG4gIDwvY2VsbFhmcz5cbiAgPGNlbGxTdHlsZXMgY291bnQ9XCIxXCI+XG4gICAgPGNlbGxTdHlsZSBuYW1lPVwiTm9ybWFsXCIgeGZJZD1cIjBcIiBidWlsdGluSWQ9XCIwXCIvPlxuICA8L2NlbGxTdHlsZXM+XG4gIDxkeGZzIGNvdW50PVwiMFwiIC8+XG4gIDx0YWJsZVN0eWxlcyBjb3VudD1cIjBcIiBkZWZhdWx0VGFibGVTdHlsZT1cIlRhYmxlU3R5bGVNZWRpdW0yXCIgZGVmYXVsdFBpdm90U3R5bGU9XCJQaXZvdFN0eWxlTWVkaXVtOVwiIC8+XG48L3N0eWxlU2hlZXQ+YDtcblxuZnVuY3Rpb24gd3JpdGVGb3JtdWxhKGZvcm11bGEpIHtcbiAgICBpZiAodHlwZW9mIGZvcm11bGEgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYDxmPiR7RVNDKGZvcm11bGEpfTwvZj5gO1xuICAgIH1cbiAgICAvLyBhcnJheSBmb3JtdWxhc1xuICAgIHJldHVybiBgPGYgdD1cImFycmF5XCIgcmVmPVwiJHtmb3JtdWxhLnJlZn1cIj4ke0VTQyhmb3JtdWxhLnNyYyl9PC9mPmA7XG59XG5cbmZ1bmN0aW9uIG51bUNoYXIoY29sSW5kZXgpIHtcbiAgIGNvbnN0IGxldHRlciA9IE1hdGguZmxvb3IoY29sSW5kZXggLyAyNikgLSAxO1xuXG4gICByZXR1cm4gKGxldHRlciA+PSAwID8gbnVtQ2hhcihsZXR0ZXIpIDogXCJcIikgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgKGNvbEluZGV4ICUgMjYpKTtcbn1cblxuZnVuY3Rpb24gcmVmKHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgIHJldHVybiBudW1DaGFyKGNvbEluZGV4KSArIChyb3dJbmRleCArIDEpO1xufVxuXG5mdW5jdGlvbiAkcmVmKHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgIHJldHVybiBcIiRcIiArIG51bUNoYXIoY29sSW5kZXgpICsgXCIkXCIgKyAocm93SW5kZXggKyAxKTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyUm93SW5kZXgob3B0aW9ucykge1xuICAgIGNvbnN0IGZyb3plblJvd3MgPSBvcHRpb25zLmZyb3plblJvd3MgfHwgKG9wdGlvbnMuZnJlZXplUGFuZSB8fCB7fSkucm93U3BsaXQgfHwgMTtcbiAgICByZXR1cm4gZnJvemVuUm93cyAtIDE7XG59XG5cbmZ1bmN0aW9uIHRvV2lkdGgocHgpIHtcbiAgICByZXR1cm4gKChweCAvIDcpICogMTAwICsgMC41KSAvIDEwMDtcbn1cblxuZnVuY3Rpb24gdG9IZWlnaHQocHgpIHtcbiAgICByZXR1cm4gcHggKiAwLjc1O1xufVxuXG5mdW5jdGlvbiBzdHJpcEZ1bm55Q2hhcnModmFsdWUpIHtcbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKVxuICAgICAgICAucmVwbGFjZSgvW1xceDAwLVxceDA5XFx4MEJcXHgwQ1xceDBFLVxceDFGXS9nLCBcIlwiKSAvLyBsZWF2ZSBDUkxGIGluXG4gICAgICAgIC5yZXBsYWNlKC9cXHI/XFxuL2csIFwiXFxyXFxuXCIpOyAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgTEYgaXMgcHJlY2VkZWQgYnkgQ1Jcbn1cblxuY2xhc3MgV29ya3NoZWV0IHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHNoYXJlZFN0cmluZ3MsIHN0eWxlcywgYm9yZGVycykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9zdHJpbmdzID0gc2hhcmVkU3RyaW5ncztcbiAgICAgICAgdGhpcy5fc3R5bGVzID0gc3R5bGVzO1xuICAgICAgICB0aGlzLl9ib3JkZXJzID0gYm9yZGVycztcbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICByZWxzVG9YTUwoKSB7XG4gICAgICAgIGNvbnN0IGh5cGVybGlua3MgPSB0aGlzLm9wdGlvbnMuaHlwZXJsaW5rcyB8fCBbXTtcbiAgICAgICAgaWYgKCFoeXBlcmxpbmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gV09SS1NIRUVUX1JFTFMoeyBoeXBlcmxpbmtzOiBoeXBlcmxpbmtzIH0pO1xuICAgIH1cblxuICAgIHRvWE1MKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IG1lcmdlQ2VsbHMgPSB0aGlzLm9wdGlvbnMubWVyZ2VkQ2VsbHMgfHwgW107XG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLm9wdGlvbnMucm93cyB8fCBbXTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGluZmxhdGUocm93cywgbWVyZ2VDZWxscyk7XG5cbiAgICAgICAgdGhpcy5fcmVhZENlbGxzKGRhdGEpO1xuXG4gICAgICAgIGxldCBhdXRvRmlsdGVyID0gdGhpcy5vcHRpb25zLmZpbHRlcjtcbiAgICAgICAgbGV0IGZpbHRlcjtcbiAgICAgICAgaWYgKGF1dG9GaWx0ZXIgJiYgKHR5cGVvZiBhdXRvRmlsdGVyLmZyb20gPT09IFwibnVtYmVyXCIpICYmICh0eXBlb2YgYXV0b0ZpbHRlci50byA9PT0gXCJudW1iZXJcIikpIHtcbiAgICAgICAgICAgIC8vIEdyaWQgZW5hYmxlcyBhdXRvIGZpbHRlclxuICAgICAgICAgICAgYXV0b0ZpbHRlciA9IHtcbiAgICAgICAgICAgICAgICBmcm9tOiByZWYoZmlsdGVyUm93SW5kZXgodGhpcy5vcHRpb25zKSwgYXV0b0ZpbHRlci5mcm9tKSxcbiAgICAgICAgICAgICAgICB0bzogcmVmKGZpbHRlclJvd0luZGV4KHRoaXMub3B0aW9ucyksIGF1dG9GaWx0ZXIudG8pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKGF1dG9GaWx0ZXIgJiYgYXV0b0ZpbHRlci5yZWYgJiYgYXV0b0ZpbHRlci5jb2x1bW5zKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIHByb2JhYmx5IGZyb20gdGhlIFNwcmVhZHNoZWV0XG4gICAgICAgICAgICBmaWx0ZXIgPSBhdXRvRmlsdGVyO1xuICAgICAgICAgICAgYXV0b0ZpbHRlciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuX3ZhbGlkYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX3ZhbGlkYXRpb25zLCBpKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zLnB1c2godGhpcy5fdmFsaWRhdGlvbnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRlZmF1bHRDZWxsU3R5bGVJZCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGVmYXVsdENlbGxTdHlsZSkge1xuICAgICAgICAgICAgZGVmYXVsdENlbGxTdHlsZUlkID0gdGhpcy5fbG9va3VwU3R5bGUodGhpcy5vcHRpb25zLmRlZmF1bHRDZWxsU3R5bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZnJlZXplUGFuZSA9IHRoaXMub3B0aW9ucy5mcmVlemVQYW5lIHx8IHt9O1xuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHRoaXMub3B0aW9ucy5kZWZhdWx0cyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIFdPUktTSEVFVCh7XG4gICAgICAgICAgICBmcm96ZW5Db2x1bW5zOiB0aGlzLm9wdGlvbnMuZnJvemVuQ29sdW1ucyB8fCBmcmVlemVQYW5lLmNvbFNwbGl0LFxuICAgICAgICAgICAgZnJvemVuUm93czogdGhpcy5vcHRpb25zLmZyb3plblJvd3MgfHwgZnJlZXplUGFuZS5yb3dTcGxpdCxcbiAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMub3B0aW9ucy5jb2x1bW5zLFxuICAgICAgICAgICAgZGVmYXVsdHM6IGRlZmF1bHRzLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIG1lcmdlQ2VsbHM6IG1lcmdlQ2VsbHMsXG4gICAgICAgICAgICBhdXRvRmlsdGVyOiBhdXRvRmlsdGVyLFxuICAgICAgICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICAgICAgICBzaG93R3JpZExpbmVzOiB0aGlzLm9wdGlvbnMuc2hvd0dyaWRMaW5lcyxcbiAgICAgICAgICAgIGh5cGVybGlua3M6IHRoaXMub3B0aW9ucy5oeXBlcmxpbmtzIHx8IFtdLFxuICAgICAgICAgICAgdmFsaWRhdGlvbnM6IHZhbGlkYXRpb25zLFxuICAgICAgICAgICAgZGVmYXVsdENlbGxTdHlsZUlkOiBkZWZhdWx0Q2VsbFN0eWxlSWQsXG4gICAgICAgICAgICBydGw6IHRoaXMub3B0aW9ucy5ydGwgIT09IHVuZGVmaW5lZCA/IHRoaXMub3B0aW9ucy5ydGwgOiBkZWZhdWx0cy5ydGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2xvb2t1cFN0cmluZyh2YWx1ZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBcIiRcIiArIHZhbHVlO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX3N0cmluZ3MuaW5kZXhlc1trZXldO1xuICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBpbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3N0cmluZ3MuaW5kZXhlc1trZXldID0gdGhpcy5fc3RyaW5ncy51bmlxdWVDb3VudDtcbiAgICAgICAgICAgIHRoaXMuX3N0cmluZ3MudW5pcXVlQ291bnQgKys7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zdHJpbmdzLmNvdW50ICsrO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgX2xvb2t1cFN0eWxlKHN0eWxlKSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShzdHlsZSk7XG5cbiAgICAgICAgaWYgKGpzb24gPT09IFwie31cIikge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5kZXggPSBpbmRleE9mKGpzb24sIHRoaXMuX3N0eWxlcyk7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9zdHlsZXMucHVzaChqc29uKSAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGVyZSBpcyBvbmUgZGVmYXVsdCBzdHlsZVxuICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgIH1cblxuICAgIF9sb29rdXBCb3JkZXIoYm9yZGVyKSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShib3JkZXIpO1xuICAgICAgICBpZiAoanNvbiA9PT0gXCJ7fVwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5kZXggPSBpbmRleE9mKGpzb24sIHRoaXMuX2JvcmRlcnMpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2JvcmRlcnMucHVzaChqc29uKSAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGVyZSBpcyBvbmUgZGVmYXVsdCBib3JkZXJcbiAgICAgICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgICB9XG5cbiAgICBfcmVhZENlbGxzKHJvd0RhdGEpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSByb3dEYXRhW2ldO1xuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cuY2VsbHM7XG5cbiAgICAgICAgICAgIHJvdy5kYXRhID0gW107XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2VsbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsRGF0YSA9IHRoaXMuX2NlbGwoY2VsbHNbal0sIHJvdy5pbmRleCwgaik7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5kYXRhLnB1c2goY2VsbERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jZWxsKGRhdGEsIHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgaWYgKCFkYXRhIHx8IGRhdGEgPT09IEVNUFRZX0NFTEwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHZhbHVlID0gZGF0YS52YWx1ZTtcblxuICAgICAgICBsZXQgYm9yZGVyID0ge307XG5cbiAgICAgICAgaWYgKGRhdGEuYm9yZGVyTGVmdCkge1xuICAgICAgICAgICAgYm9yZGVyLmxlZnQgPSBkYXRhLmJvcmRlckxlZnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5ib3JkZXJSaWdodCkge1xuICAgICAgICAgICAgYm9yZGVyLnJpZ2h0ID0gZGF0YS5ib3JkZXJSaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhLmJvcmRlclRvcCkge1xuICAgICAgICAgICAgYm9yZGVyLnRvcCA9IGRhdGEuYm9yZGVyVG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEuYm9yZGVyQm90dG9tKSB7XG4gICAgICAgICAgICBib3JkZXIuYm90dG9tID0gZGF0YS5ib3JkZXJCb3R0b207XG4gICAgICAgIH1cblxuICAgICAgICBib3JkZXIgPSB0aGlzLl9sb29rdXBCb3JkZXIoYm9yZGVyKTtcblxuICAgICAgICBjb25zdCBkZWZTdHlsZSA9IHRoaXMub3B0aW9ucy5kZWZhdWx0Q2VsbFN0eWxlIHx8IHt9O1xuICAgICAgICBsZXQgc3R5bGUgPSB7IGJvcmRlcklkOiBib3JkZXIgfTtcblxuICAgICAgICAoZnVuY3Rpb24oYWRkKSB7XG4gICAgICAgICAgICBhZGQoXCJjb2xvclwiKTtcbiAgICAgICAgICAgIGFkZChcImJhY2tncm91bmRcIik7XG4gICAgICAgICAgICBhZGQoXCJib2xkXCIpO1xuICAgICAgICAgICAgYWRkKFwiaXRhbGljXCIpO1xuICAgICAgICAgICAgYWRkKFwidW5kZXJsaW5lXCIpO1xuICAgICAgICAgICAgaWYgKCFhZGQoXCJmb250RmFtaWx5XCIpKSB7IGFkZChcImZvbnROYW1lXCIsIFwiZm9udEZhbWlseVwiKTsgfVxuICAgICAgICAgICAgYWRkKFwiZm9udFNpemVcIik7XG4gICAgICAgICAgICBhZGQoXCJmb3JtYXRcIik7XG4gICAgICAgICAgICBpZiAoIWFkZChcInRleHRBbGlnblwiKSkgeyBhZGQoXCJoQWxpZ25cIiwgXCJ0ZXh0QWxpZ25cIik7IH1cbiAgICAgICAgICAgIGlmICghYWRkKFwidmVydGljYWxBbGlnblwiKSkgeyBhZGQoXCJ2QWxpZ25cIiwgXCJ2ZXJ0aWNhbEFsaWduXCIpOyB9XG4gICAgICAgICAgICBhZGQoXCJ3cmFwXCIpO1xuICAgICAgICB9KShcbiAgICAgICAgICAgIGZ1bmN0aW9uKHByb3AsIHRhcmdldCkge1xuICAgICAgICAgICAgICAgIGxldCB2YWwgPSBkYXRhW3Byb3BdO1xuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSBkZWZTdHlsZVtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlW3RhcmdldCB8fCBwcm9wXSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLm9wdGlvbnMuY29sdW1ucyB8fCBbXTtcblxuICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW2NlbGxJbmRleF07XG4gICAgICAgIGxldCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gICAgICAgIGlmIChjb2x1bW4gJiYgY29sdW1uLmF1dG9XaWR0aCkge1xuICAgICAgICAgICAgbGV0IGRpc3BsYXlWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAvLyBYWFg6IGxldCdzIG5vdCBicmluZyBrZW5kby50b1N0cmluZyBpbiBvbmx5IGZvciB0aGlzLlxuICAgICAgICAgICAgLy8gICAgICBiZXR0ZXIgd2FpdCB1bnRpbCB0aGUgc3ByZWFkc2hlZXQgZW5naW5lIGlzIGF2YWlsYWJsZSBhcyBhIHNlcGFyYXRlXG4gICAgICAgICAgICAvLyAgICAgIGNvbXBvbmVudCwgdGhlbiB3ZSBjYW4gdXNlIGEgcmVhbCBFeGNlbC1saWtlIGZvcm1hdHRlci5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIC8vIGtlbmRvLnRvU3RyaW5nIHdpbGwgbm90IGJlaGF2ZSBleGFjdGx5IGxpa2UgdGhlIEV4Y2VsIGZvcm1hdFxuICAgICAgICAgICAgICAgIC8vIFN0aWxsLCBpdCdzIHRoZSBiZXN0IHdlIGhhdmUgYXZhaWxhYmxlIGZvciBlc3RpbWF0aW5nIHRoZSBjaGFyYWN0ZXIgY291bnQuXG4gICAgICAgICAgICAgICAgZGlzcGxheVZhbHVlID0gSW50bFNlcnZpY2UudG9TdHJpbmcodmFsdWUsIGRhdGEuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29sdW1uLndpZHRoID0gTWF0aC5tYXgoY29sdW1uLndpZHRoIHx8IDAsIFN0cmluZyhkaXNwbGF5VmFsdWUpLmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdmFsdWUgPSBzdHJpcEZ1bm55Q2hhcnModmFsdWUpO1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl9sb29rdXBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgdHlwZSA9IFwic1wiO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHR5cGUgPSBcIm5cIjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgdHlwZSA9IFwiYlwiO1xuICAgICAgICAgICAgdmFsdWUgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICYmIHZhbHVlLmdldFRpbWUpIHtcbiAgICAgICAgICAgIHR5cGUgPSBudWxsO1xuICAgICAgICAgICAgdmFsdWUgPSBkYXRlVG9TZXJpYWwodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFzdHlsZS5mb3JtYXQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5mb3JtYXQgPSBcIm1tLWRkLXl5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gbnVsbDtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0eWxlID0gdGhpcy5fbG9va3VwU3R5bGUoc3R5bGUpO1xuXG4gICAgICAgIGNvbnN0IGNlbGxOYW1lID0gcmVmKHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuXG4gICAgICAgIGlmIChkYXRhLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZFZhbGlkYXRpb24oZGF0YS52YWxpZGF0aW9uLCBjZWxsTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZm9ybXVsYTogZGF0YS5mb3JtdWxhLFxuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgIHJlZjogY2VsbE5hbWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfYWRkVmFsaWRhdGlvbih2LCByZWYpIHtcbiAgICAgICAgY29uc3QgdG1wID0ge1xuICAgICAgICAgICAgc2hvd0Vycm9yTWVzc2FnZSA6IHYudHlwZSA9PT0gXCJyZWplY3RcIiA/IDEgOiAwLFxuICAgICAgICAgICAgZm9ybXVsYTEgICAgICAgICA6IHYuZnJvbSxcbiAgICAgICAgICAgIGZvcm11bGEyICAgICAgICAgOiB2LnRvLFxuICAgICAgICAgICAgdHlwZSAgICAgICAgICAgICA6IE1BUF9FWENFTF9UWVBFW3YuZGF0YVR5cGVdIHx8IHYuZGF0YVR5cGUsXG4gICAgICAgICAgICBvcGVyYXRvciAgICAgICAgIDogTUFQX0VYQ0VMX09QRVJBVE9SW3YuY29tcGFyZXJUeXBlXSB8fCB2LmNvbXBhcmVyVHlwZSxcbiAgICAgICAgICAgIGFsbG93QmxhbmsgICAgICAgOiB2LmFsbG93TnVsbHMgPyAxIDogMCxcbiAgICAgICAgICAgIHNob3dEcm9wRG93biAgICAgOiB2LnNob3dCdXR0b24gPyAwIDogMSwgLy8gTE9MLCBFeGNlbCFcbiAgICAgICAgICAgIGVycm9yICAgICAgICAgICAgOiB2Lm1lc3NhZ2VUZW1wbGF0ZSxcbiAgICAgICAgICAgIGVycm9yVGl0bGUgICAgICAgOiB2LnRpdGxlVGVtcGxhdGVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHRtcCk7XG4gICAgICAgIGlmICghdGhpcy5fdmFsaWRhdGlvbnNbanNvbl0pIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25zW2pzb25dID0gdG1wO1xuICAgICAgICAgICAgdG1wLnNxcmVmID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbnNbanNvbl0uc3FyZWYucHVzaChyZWYpO1xuICAgIH1cbn1cblxuY29uc3QgTUFQX0VYQ0VMX09QRVJBVE9SID0ge1xuICAgIC8vIGluY2x1ZGVzIG9ubHkgd2hhdCBkaWZmZXJzOyBrZXkgaXMgb3VyIG9wZXJhdG9yLCB2YWx1ZSBpcyBFeGNlbFxuICAgIC8vIG9wZXJhdG9yLlxuICAgIGdyZWF0ZXJUaGFuT3JFcXVhbFRvIDogXCJncmVhdGVyVGhhbk9yRXF1YWxcIixcbiAgICBsZXNzVGhhbk9yRXF1YWxUbyAgICA6IFwibGVzc1RoYW5PckVxdWFsXCJcbn07XG5cbmNvbnN0IE1BUF9FWENFTF9UWVBFID0ge1xuICAgIG51bWJlcjogXCJkZWNpbWFsXCJcbn07XG5cbmNvbnN0IGRlZmF1bHRGb3JtYXRzID0ge1xuICAgIFwiR2VuZXJhbFwiOiAwLFxuICAgIFwiMFwiOiAxLFxuICAgIFwiMC4wMFwiOiAyLFxuICAgIFwiIywjIzBcIjogMyxcbiAgICBcIiMsIyMwLjAwXCI6IDQsXG4gICAgXCIwJVwiOiA5LFxuICAgIFwiMC4wMCVcIjogMTAsXG4gICAgXCIwLjAwRSswMFwiOiAxMSxcbiAgICBcIiMgPy8/XCI6IDEyLFxuICAgIFwiIyA/Py8/P1wiOiAxMyxcbiAgICBcIm1tLWRkLXl5XCI6IDE0LFxuICAgIFwiZC1tbW0teXlcIjogMTUsXG4gICAgXCJkLW1tbVwiOiAxNixcbiAgICBcIm1tbS15eVwiOiAxNyxcbiAgICBcImg6bW0gQU0vUE1cIjogMTgsXG4gICAgXCJoOm1tOnNzIEFNL1BNXCI6IDE5LFxuICAgIFwiaDptbVwiOiAyMCxcbiAgICBcImg6bW06c3NcIjogMjEsXG4gICAgXCJtL2QveXkgaDptbVwiOiAyMixcbiAgICBcIiMsIyMwIDsoIywjIzApXCI6IDM3LFxuICAgIFwiIywjIzAgO1tSZWRdKCMsIyMwKVwiOiAzOCxcbiAgICBcIiMsIyMwLjAwOygjLCMjMC4wMClcIjogMzksXG4gICAgXCIjLCMjMC4wMDtbUmVkXSgjLCMjMC4wMClcIjogNDAsXG4gICAgXCJtbTpzc1wiOiA0NSxcbiAgICBcIltoXTptbTpzc1wiOiA0NixcbiAgICBcIm1tc3MuMFwiOiA0NyxcbiAgICBcIiMjMC4wRSswXCI6IDQ4LFxuICAgIFwiQFwiOiA0OSxcbiAgICBcIlskLTQwNF1lL20vZFwiOiAyNyxcbiAgICBcIm0vZC95eVwiOiAzMCxcbiAgICBcInQwXCI6IDU5LFxuICAgIFwidDAuMDBcIjogNjAsXG4gICAgXCJ0IywjIzBcIjogNjEsXG4gICAgXCJ0IywjIzAuMDBcIjogNjIsXG4gICAgXCJ0MCVcIjogNjcsXG4gICAgXCJ0MC4wMCVcIjogNjgsXG4gICAgXCJ0IyA/Lz9cIjogNjksXG4gICAgXCJ0IyA/Py8/P1wiOiA3MFxufTtcblxuZnVuY3Rpb24gY29udmVydENvbG9yKHZhbHVlKSB7XG4gICAgbGV0IGNvbG9yID0gdmFsdWU7XG4gICAgaWYgKGNvbG9yLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgY29sb3IgPSBjb2xvci5yZXBsYWNlKC8oXFx3KS9nLCBmdW5jdGlvbigkMCwgJDEpIHtcbiAgICAgICAgICAgIHJldHVybiAkMSArICQxO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb2xvciA9IGNvbG9yLnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgaWYgKGNvbG9yLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgY29sb3IgPSBcIkZGXCIgKyBjb2xvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gY29sb3I7XG59XG5cbmNsYXNzIFdvcmtib29rIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdGhpcy5fc3RyaW5ncyA9IHtcbiAgICAgICAgICAgIGluZGV4ZXM6IHt9LFxuICAgICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgICB1bmlxdWVDb3VudDogMFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdHlsZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fYm9yZGVycyA9IFtdO1xuXG4gICAgICAgIHRoaXMuX3NoZWV0cyA9IG1hcCh0aGlzLm9wdGlvbnMuc2hlZXRzIHx8IFtdLCAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgb3B0aW9ucy5kZWZhdWx0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBuZXcgV29ya3NoZWV0KG9wdGlvbnMsIHRoaXMuX3N0cmluZ3MsIHRoaXMuX3N0eWxlcywgdGhpcy5fYm9yZGVycyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRvWklQKCkge1xuICAgICAgICBjb25zdCB6aXAgPSBjcmVhdGVaaXAoKTtcblxuICAgICAgICBjb25zdCBkb2NQcm9wcyA9IHppcC5mb2xkZXIoXCJkb2NQcm9wc1wiKTtcblxuICAgICAgICBkb2NQcm9wcy5maWxlKFwiY29yZS54bWxcIiwgQ09SRSh7XG4gICAgICAgICAgICBjcmVhdG9yOiB0aGlzLm9wdGlvbnMuY3JlYXRvciB8fCBcIktlbmRvIFVJXCIsXG4gICAgICAgICAgICBsYXN0TW9kaWZpZWRCeTogdGhpcy5vcHRpb25zLmNyZWF0b3IgfHwgXCJLZW5kbyBVSVwiLFxuICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5vcHRpb25zLmRhdGUgfHwgbmV3IERhdGUoKS50b0pTT04oKSxcbiAgICAgICAgICAgIG1vZGlmaWVkOiB0aGlzLm9wdGlvbnMuZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSlNPTigpXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCBzaGVldENvdW50ID0gdGhpcy5fc2hlZXRzLmxlbmd0aDtcblxuICAgICAgICBkb2NQcm9wcy5maWxlKFwiYXBwLnhtbFwiLCBBUFAoeyBzaGVldHM6IHRoaXMuX3NoZWV0cyB9KSk7XG5cbiAgICAgICAgY29uc3QgcmVscyA9IHppcC5mb2xkZXIoXCJfcmVsc1wiKTtcbiAgICAgICAgcmVscy5maWxlKFwiLnJlbHNcIiwgUkVMUyk7XG5cbiAgICAgICAgY29uc3QgeGwgPSB6aXAuZm9sZGVyKFwieGxcIik7XG5cbiAgICAgICAgY29uc3QgeGxSZWxzID0geGwuZm9sZGVyKFwiX3JlbHNcIik7XG4gICAgICAgIHhsUmVscy5maWxlKFwid29ya2Jvb2sueG1sLnJlbHNcIiwgV09SS0JPT0tfUkVMUyh7IGNvdW50OiBzaGVldENvdW50IH0pKTtcblxuICAgICAgICBjb25zdCBzaGVldElkcyA9IHt9O1xuXG4gICAgICAgIHhsLmZpbGUoXCJ3b3JrYm9vay54bWxcIiwgV09SS0JPT0soe1xuICAgICAgICAgICAgc2hlZXRzOiB0aGlzLl9zaGVldHMsXG4gICAgICAgICAgICBmaWx0ZXJOYW1lczogbWFwKHRoaXMuX3NoZWV0cywgZnVuY3Rpb24oc2hlZXQsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHNoZWV0Lm9wdGlvbnM7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gKG9wdGlvbnMubmFtZSB8fCBvcHRpb25zLnRpdGxlIHx8IFwiU2hlZXRcIiArIChpbmRleCArIDEpKTtcbiAgICAgICAgICAgICAgICBzaGVldElkc1tzaGVldE5hbWUudG9Mb3dlckNhc2UoKV0gPSBpbmRleDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIucmVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzcHJlYWRzaGVldCBwcm92aWRlcyBgcmVmYFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBmaWx0ZXIucmVmLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcGFyc2VSZWYoYVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBwYXJzZVJlZihhWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTaGVldElkOiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogJHJlZihmcm9tLnJvdywgZnJvbS5jb2wpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAkcmVmKHRvLnJvdywgdG8uY29sKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZmlsdGVyLmZyb20gIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGZpbHRlci50byAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JpZCBkb2VzIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTaGVldElkOiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogJHJlZihmaWx0ZXJSb3dJbmRleChvcHRpb25zKSwgZmlsdGVyLmZyb20pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAkcmVmKGZpbHRlclJvd0luZGV4KG9wdGlvbnMpLCBmaWx0ZXIudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB1c2VyTmFtZXM6IG1hcCh0aGlzLm9wdGlvbnMubmFtZXMgfHwgW10sIGZ1bmN0aW9uKGRlZikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGRlZi5sb2NhbE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU2hlZXRJZDogZGVmLnNoZWV0ID8gc2hlZXRJZHNbZGVmLnNoZWV0LnRvTG93ZXJDYXNlKCldIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlZi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiBkZWYuaGlkZGVuXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCB3b3Jrc2hlZXRzID0geGwuZm9sZGVyKFwid29ya3NoZWV0c1wiKTtcblxuICAgICAgICBjb25zdCBzaGVldFJlbHMgPSB3b3Jrc2hlZXRzLmZvbGRlcihcIl9yZWxzXCIpO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHNoZWV0Q291bnQ7IGlkeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuX3NoZWV0c1tpZHhdO1xuICAgICAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gYHNoZWV0JHtpZHggKyAxfS54bWxgO1xuICAgICAgICAgICAgY29uc3QgcmVsc1htbCA9IHNoZWV0LnJlbHNUb1hNTCgpO1xuXG4gICAgICAgICAgICBpZiAocmVsc1htbCkge1xuICAgICAgICAgICAgICAgIHNoZWV0UmVscy5maWxlKHNoZWV0TmFtZSArIFwiLnJlbHNcIiwgcmVsc1htbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdvcmtzaGVldHMuZmlsZShzaGVldE5hbWUsIHNoZWV0LnRvWE1MKGlkeCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYm9yZGVycyA9IG1hcCh0aGlzLl9ib3JkZXJzLCBwYXJzZUpTT04pO1xuXG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IG1hcCh0aGlzLl9zdHlsZXMsIHBhcnNlSlNPTik7XG5cbiAgICAgICAgY29uc3QgaGFzRm9udCA9IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3R5bGUudW5kZXJsaW5lIHx8IHN0eWxlLmJvbGQgfHwgc3R5bGUuaXRhbGljIHx8IHN0eWxlLmNvbG9yIHx8IHN0eWxlLmZvbnRGYW1pbHkgfHwgc3R5bGUuZm9udFNpemU7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZm9udHMgPSBtYXAoc3R5bGVzLCBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgaWYgKHN0eWxlLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuY29sb3IgPSBjb252ZXJ0Q29sb3Ioc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzRm9udChzdHlsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdHMgPSBtYXAoc3R5bGVzLCBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgaWYgKHN0eWxlLmZvcm1hdCAmJiBkZWZhdWx0Rm9ybWF0c1tzdHlsZS5mb3JtYXRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGZpbGxzID0gbWFwKHN0eWxlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgIGlmIChzdHlsZS5iYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuYmFja2dyb3VuZCA9IGNvbnZlcnRDb2xvcihzdHlsZS5iYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHhsLmZpbGUoXCJzdHlsZXMueG1sXCIsIFNUWUxFUyh7XG4gICAgICAgICAgICBmb250czogZm9udHMsXG4gICAgICAgICAgICBmaWxsczogZmlsbHMsXG4gICAgICAgICAgICBmb3JtYXRzOiBmb3JtYXRzLFxuICAgICAgICAgICAgYm9yZGVyczogYm9yZGVycyxcbiAgICAgICAgICAgIHN0eWxlczogbWFwKHN0eWxlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcblxuICAgICAgICAgICAgICAgIGlmIChoYXNGb250KHN0eWxlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9udElkID0gaW5kZXhPZihzdHlsZSwgZm9udHMpICsgMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuYmFja2dyb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsbElkID0gaW5kZXhPZihzdHlsZSwgZmlsbHMpICsgMjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHQudGV4dEFsaWduID0gc3R5bGUudGV4dEFsaWduO1xuICAgICAgICAgICAgICAgIHJlc3VsdC52ZXJ0aWNhbEFsaWduID0gc3R5bGUudmVydGljYWxBbGlnbjtcbiAgICAgICAgICAgICAgICByZXN1bHQud3JhcCA9IHN0eWxlLndyYXA7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmJvcmRlcklkID0gc3R5bGUuYm9yZGVySWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0Rm9ybWF0c1tzdHlsZS5mb3JtYXRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5udW1GbXRJZCA9IGRlZmF1bHRGb3JtYXRzW3N0eWxlLmZvcm1hdF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubnVtRm10SWQgPSAxNjUgKyBpbmRleE9mKHN0eWxlLCBmb3JtYXRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgeGwuZmlsZShcInNoYXJlZFN0cmluZ3MueG1sXCIsIFNIQVJFRF9TVFJJTkdTKHRoaXMuX3N0cmluZ3MpKTtcblxuICAgICAgICB6aXAuZmlsZShcIltDb250ZW50X1R5cGVzXS54bWxcIiwgQ09OVEVOVF9UWVBFUyggeyBjb3VudDogc2hlZXRDb3VudCB9KSk7XG5cbiAgICAgICAgcmV0dXJuIHppcDtcbiAgICB9XG5cbiAgICB0b0RhdGFVUkwoKSB7XG4gICAgICAgIGNvbnN0IHppcCA9IHRoaXMudG9aSVAoKTtcblxuICAgICAgICByZXR1cm4gemlwLmdlbmVyYXRlQXN5bmMgPyB6aXAuZ2VuZXJhdGVBc3luYyhEQVRBX1VSTF9PUFRJT05TKS50aGVuKHRvRGF0YVVSSSkgOiB0b0RhdGFVUkkoemlwLmdlbmVyYXRlKERBVEFfVVJMX09QVElPTlMpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJvcmRlclN0eWxlKHdpZHRoKSB7XG4gICAgbGV0IGFsaWFzID0gXCJ0aGluXCI7XG5cbiAgICBpZiAod2lkdGggPT09IDIpIHtcbiAgICAgICAgYWxpYXMgPSBcIm1lZGl1bVwiO1xuICAgIH0gZWxzZSBpZiAod2lkdGggPT09IDMpIHtcbiAgICAgICAgYWxpYXMgPSBcInRoaWNrXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsaWFzO1xufVxuXG5mdW5jdGlvbiBib3JkZXJTaWRlVGVtcGxhdGUobmFtZSwgc3R5bGUpIHtcbiAgICBsZXQgcmVzdWx0ID0gXCJcIjtcblxuICAgIGlmIChzdHlsZSkge1xuICAgICAgICByZXN1bHQgKz0gXCI8XCIgKyBuYW1lICsgXCIgc3R5bGU9XFxcIlwiICsgYm9yZGVyU3R5bGUoc3R5bGUuc2l6ZSkgKyBcIlxcXCI+XCI7XG4gICAgICAgIGlmIChzdHlsZS5jb2xvcikge1xuICAgICAgICAgICAgcmVzdWx0ICs9IFwiPGNvbG9yIHJnYj1cXFwiXCIgKyBjb252ZXJ0Q29sb3Ioc3R5bGUuY29sb3IpICsgXCJcXFwiLz5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gXCI8L1wiICsgbmFtZSArIFwiPlwiO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGJvcmRlclRlbXBsYXRlKGJvcmRlcikge1xuICAgIHJldHVybiBcIjxib3JkZXI+XCIgK1xuICAgICAgIGJvcmRlclNpZGVUZW1wbGF0ZShcImxlZnRcIiwgYm9yZGVyLmxlZnQpICtcbiAgICAgICBib3JkZXJTaWRlVGVtcGxhdGUoXCJyaWdodFwiLCBib3JkZXIucmlnaHQpICtcbiAgICAgICBib3JkZXJTaWRlVGVtcGxhdGUoXCJ0b3BcIiwgYm9yZGVyLnRvcCkgK1xuICAgICAgIGJvcmRlclNpZGVUZW1wbGF0ZShcImJvdHRvbVwiLCBib3JkZXIuYm90dG9tKSArXG4gICBcIjwvYm9yZGVyPlwiO1xufVxuXG5jb25zdCBFTVBUWV9DRUxMID0ge307XG5mdW5jdGlvbiBpbmZsYXRlKHJvd3MsIG1lcmdlZENlbGxzKSB7XG4gICAgY29uc3Qgcm93RGF0YSA9IFtdO1xuICAgIGNvbnN0IHJvd3NCeUluZGV4ID0gW107XG5cbiAgICBpbmRleFJvd3Mocm93cywgZnVuY3Rpb24ocm93LCBpbmRleCkge1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgX3NvdXJjZTogcm93LFxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgaGVpZ2h0OiByb3cuaGVpZ2h0LFxuICAgICAgICAgICAgY2VsbHM6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgcm93RGF0YS5wdXNoKGRhdGEpO1xuICAgICAgICByb3dzQnlJbmRleFtpbmRleF0gPSBkYXRhO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkID0gc29ydEJ5SW5kZXgocm93RGF0YSkuc2xpY2UoMCk7XG4gICAgY29uc3QgY3R4ID0ge1xuICAgICAgICByb3dEYXRhOiByb3dEYXRhLFxuICAgICAgICByb3dzQnlJbmRleDogcm93c0J5SW5kZXgsXG4gICAgICAgIG1lcmdlZENlbGxzOiBtZXJnZWRDZWxsc1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBmaWxsQ2VsbHMoc29ydGVkW2ldLCBjdHgpO1xuICAgICAgICBkZWxldGUgc29ydGVkW2ldLl9zb3VyY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvcnRCeUluZGV4KHJvd0RhdGEpO1xufVxuXG5mdW5jdGlvbiBpbmRleFJvd3Mocm93cywgY2FsbGJhY2spIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTtcbiAgICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGluZGV4ID0gcm93LmluZGV4O1xuICAgICAgICBpZiAodHlwZW9mIGluZGV4ICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhyb3csIGluZGV4KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRCeUluZGV4KGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHB1c2hVbmlxdWUoYXJyYXksIGVsKSB7XG4gICAgaWYgKGFycmF5LmluZGV4T2YoZWwpIDwgMCkge1xuICAgICAgICBhcnJheS5wdXNoKGVsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFNwYW4obWVyZ2VkQ2VsbHMsIHJlZikge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVyZ2VkQ2VsbHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtZXJnZWRDZWxsc1tpXTtcbiAgICAgICAgY29uc3QgYSA9IHJhbmdlLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgbGV0IHRvcExlZnQgPSBhWzBdO1xuICAgICAgICBpZiAodG9wTGVmdCA9PT0gcmVmKSB7XG4gICAgICAgICAgICBsZXQgYm90dG9tUmlnaHQgPSBhWzFdO1xuICAgICAgICAgICAgdG9wTGVmdCA9IHBhcnNlUmVmKHRvcExlZnQpO1xuICAgICAgICAgICAgYm90dG9tUmlnaHQgPSBwYXJzZVJlZihib3R0b21SaWdodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJvd1NwYW46IGJvdHRvbVJpZ2h0LnJvdyAtIHRvcExlZnQucm93ICsgMSxcbiAgICAgICAgICAgICAgICBjb2xTcGFuOiBib3R0b21SaWdodC5jb2wgLSB0b3BMZWZ0LmNvbCArIDFcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVmKHJlZikge1xuICAgIGZ1bmN0aW9uIGdldGNvbChzdHIpIHtcbiAgICAgICAgbGV0IHVwcGVyU3RyID0gc3RyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGxldCBjb2wgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwcGVyU3RyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb2wgPSBjb2wgKiAyNiArIHVwcGVyU3RyLmNoYXJDb2RlQXQoaSkgLSA2NDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sIC0gMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRyb3coc3RyKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChzdHIsIDEwKSAtIDE7XG4gICAgfVxuXG4gICAgY29uc3QgbSA9IC9eKFthLXpdKykoXFxkKykkL2kuZXhlYyhyZWYpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvdzogZ2V0cm93KG1bMl0pLFxuICAgICAgICBjb2w6IGdldGNvbChtWzFdKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZpbGxDZWxscyhkYXRhLCBjdHgpIHtcbiAgICBjb25zdCByb3cgPSBkYXRhLl9zb3VyY2U7XG4gICAgY29uc3Qgcm93SW5kZXggPSBkYXRhLmluZGV4O1xuICAgIGNvbnN0IGNlbGxzID0gcm93LmNlbGxzO1xuICAgIGNvbnN0IGNlbGxEYXRhID0gZGF0YS5jZWxscztcblxuICAgIGlmICghY2VsbHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldIHx8IEVNUFRZX0NFTEw7XG5cbiAgICAgICAgbGV0IHJvd1NwYW4gPSBjZWxsLnJvd1NwYW4gfHwgMTtcbiAgICAgICAgbGV0IGNvbFNwYW4gPSBjZWxsLmNvbFNwYW4gfHwgMTtcblxuICAgICAgICBjb25zdCBjZWxsSW5kZXggPSBpbnNlcnRDZWxsKGNlbGxEYXRhLCBjZWxsKTtcbiAgICAgICAgY29uc3QgdG9wTGVmdFJlZiA9IHJlZihyb3dJbmRleCwgY2VsbEluZGV4KTtcblxuICAgICAgICBpZiAocm93U3BhbiA9PT0gMSAmJiBjb2xTcGFuID09PSAxKSB7XG4gICAgICAgICAgICAvLyBjb3VsZCBzdGlsbCBiZSBtZXJnZWQ6IHRoZSBzcHJlYWRzaGVldCBkb2VzIG5vdCBzZW5kXG4gICAgICAgICAgICAvLyByb3dTcGFuL2NvbFNwYW4sIGJ1dCBtZXJnZWRDZWxscyBpcyBhbHJlYWR5IHBvcHVsYXRlZC5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90ZWxlcmlrL2tlbmRvLXVpLWNvcmUvaXNzdWVzLzI0MDFcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IGdldFNwYW4oY3R4Lm1lcmdlZENlbGxzLCB0b3BMZWZ0UmVmKTtcbiAgICAgICAgICAgIGlmICh0bXApIHtcbiAgICAgICAgICAgICAgICBjb2xTcGFuID0gdG1wLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgcm93U3BhbiA9IHRtcC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3BhbkNlbGwoY2VsbCwgY2VsbERhdGEsIGNlbGxJbmRleCwgY29sU3Bhbik7XG5cbiAgICAgICAgaWYgKHJvd1NwYW4gPiAxIHx8IGNvbFNwYW4gPiAxKSB7XG4gICAgICAgICAgICBwdXNoVW5pcXVlKGN0eC5tZXJnZWRDZWxscyxcbiAgICAgICAgICAgICAgICAgICAgICAgdG9wTGVmdFJlZiArIFwiOlwiICsgcmVmKHJvd0luZGV4ICsgcm93U3BhbiAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ICsgY29sU3BhbiAtIDEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyb3dTcGFuID4gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcmkgPSByb3dJbmRleCArIDE7IHJpIDwgcm93SW5kZXggKyByb3dTcGFuOyByaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHRSb3cgPSBjdHgucm93c0J5SW5kZXhbcmldO1xuICAgICAgICAgICAgICAgIGlmICghbmV4dFJvdykge1xuICAgICAgICAgICAgICAgICAgICBuZXh0Um93ID0gY3R4LnJvd3NCeUluZGV4W3JpXSA9IHsgaW5kZXg6IHJpLCBjZWxsczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvd0RhdGEucHVzaChuZXh0Um93KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzcGFuQ2VsbChjZWxsLCBuZXh0Um93LmNlbGxzLCBjZWxsSW5kZXggLSAxLCBjb2xTcGFuICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydENlbGwoZGF0YSwgY2VsbCkge1xuICAgIGxldCBpbmRleDtcblxuICAgIGlmICh0eXBlb2YgY2VsbC5pbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpbmRleCA9IGNlbGwuaW5kZXg7XG4gICAgICAgIGluc2VydENlbGxBdChkYXRhLCBjZWxsLCBjZWxsLmluZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbmRleCA9IGFwcGVuZENlbGwoZGF0YSwgY2VsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xufVxuXG5mdW5jdGlvbiBpbnNlcnRDZWxsQXQoZGF0YSwgY2VsbCwgaW5kZXgpIHtcbiAgICBkYXRhW2luZGV4XSA9IGNlbGw7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZENlbGwoZGF0YSwgY2VsbCkge1xuICAgIGxldCBpbmRleCA9IGRhdGEubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aCArIDE7IGkrKykge1xuICAgICAgICBpZiAoIWRhdGFbaV0pIHtcbiAgICAgICAgICAgIGRhdGFbaV0gPSBjZWxsO1xuICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIHNwYW5DZWxsKGNlbGwsIHJvdywgc3RhcnRJbmRleCwgY29sU3Bhbikge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY29sU3BhbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRtcCA9IHtcbiAgICAgICAgICAgIGJvcmRlclRvcCAgICA6IGNlbGwuYm9yZGVyVG9wLFxuICAgICAgICAgICAgYm9yZGVyUmlnaHQgIDogY2VsbC5ib3JkZXJSaWdodCxcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbSA6IGNlbGwuYm9yZGVyQm90dG9tLFxuICAgICAgICAgICAgYm9yZGVyTGVmdCAgIDogY2VsbC5ib3JkZXJMZWZ0XG4gICAgICAgIH07XG4gICAgICAgIGluc2VydENlbGxBdChyb3csIHRtcCwgc3RhcnRJbmRleCArIGkpO1xuICAgIH1cbn1cblxuY29uc3QgU1BSRUFEU0hFRVRfRklMVEVSUyA9ICh7IHJlZiwgY29sdW1ucywgZ2VuZXJhdG9ycyB9KSA9PiBgXG48YXV0b0ZpbHRlciByZWY9XCIke3JlZn1cIj5cbiAgJHtmb3JlYWNoKGNvbHVtbnMsIChjb2wpID0+IGBcbiAgICA8ZmlsdGVyQ29sdW1uIGNvbElkPVwiJHtjb2wuaW5kZXh9XCI+XG4gICAgICAke2dlbmVyYXRvcnNbY29sLmZpbHRlcl0oY29sKX1cbiAgICA8L2ZpbHRlckNvbHVtbj5cbiAgYCl9XG48L2F1dG9GaWx0ZXI+YDtcblxuY29uc3QgU1BSRUFEU0hFRVRfQ1VTVE9NX0ZJTFRFUiA9ICh7IGxvZ2ljLCBjcml0ZXJpYSB9KSA9PiBgXG48Y3VzdG9tRmlsdGVycyAke2xvZ2ljID09PSAnYW5kJyA/ICdhbmQ9XCIxXCInIDogJyd9PlxuJHtmb3JlYWNoKGNyaXRlcmlhLCAoZikgPT4ge1xuICAgIGxldCBvcCA9IHNwcmVhZHNoZWV0RmlsdGVycy5jdXN0b21PcGVyYXRvcihmKTtcbiAgICBsZXQgdmFsID0gc3ByZWFkc2hlZXRGaWx0ZXJzLmN1c3RvbVZhbHVlKGYpO1xuICAgIHJldHVybiBgPGN1c3RvbUZpbHRlciAke29wID8gYG9wZXJhdG9yPVwiJHtvcH1cImAgOiAnJ30gdmFsPVwiJHt2YWx9XCIvPmA7XG59KX1cbjwvY3VzdG9tRmlsdGVycz5gO1xuXG5jb25zdCBTUFJFQURTSEVFVF9EWU5BTUlDX0ZJTFRFUiA9ICh7IHR5cGUgfSkgPT5cbmA8ZHluYW1pY0ZpbHRlciB0eXBlPVwiJHtzcHJlYWRzaGVldEZpbHRlcnMuZHluYW1pY0ZpbHRlclR5cGUodHlwZSl9XCIgLz5gO1xuXG5jb25zdCBTUFJFQURTSEVFVF9UT1BfRklMVEVSID0gKHsgdHlwZSwgdmFsdWUgfSkgPT5cbmA8dG9wMTAgcGVyY2VudD1cIiR7L3BlcmNlbnQkL2kudGVzdCh0eXBlKSA/IDEgOiAwfVwiXG4gICAgICAgdG9wPVwiJHsvXnRvcC9pLnRlc3QodHlwZSkgPyAxIDogMH1cIlxuICAgICAgIHZhbD1cIiR7dmFsdWV9XCIgLz5gO1xuXG5jb25zdCBTUFJFQURTSEVFVF9WQUxVRV9GSUxURVIgPSAoeyBibGFua3MsIHZhbHVlcyB9KSA9PlxuICBgPGZpbHRlcnMgJHtibGFua3MgPyAnYmxhbms9XCIxXCInIDogJyd9PlxuICAgICR7Zm9yZWFjaCh2YWx1ZXMsICh2YWx1ZSkgPT4gYFxuICAgICAgPGZpbHRlciB2YWw9XCIke3ZhbHVlfVwiIC8+YCl9XG4gIDwvZmlsdGVycz5gO1xuXG5mdW5jdGlvbiBzcHJlYWRzaGVldEZpbHRlcnMoZmlsdGVyKSB7XG4gICAgcmV0dXJuIFNQUkVBRFNIRUVUX0ZJTFRFUlMoe1xuICAgICAgICByZWY6IGZpbHRlci5yZWYsXG4gICAgICAgIGNvbHVtbnM6IGZpbHRlci5jb2x1bW5zLFxuICAgICAgICBnZW5lcmF0b3JzOiB7XG4gICAgICAgICAgICBjdXN0b20gIDogU1BSRUFEU0hFRVRfQ1VTVE9NX0ZJTFRFUixcbiAgICAgICAgICAgIGR5bmFtaWMgOiBTUFJFQURTSEVFVF9EWU5BTUlDX0ZJTFRFUixcbiAgICAgICAgICAgIHRvcCAgICAgOiBTUFJFQURTSEVFVF9UT1BfRklMVEVSLFxuICAgICAgICAgICAgdmFsdWUgICA6IFNQUkVBRFNIRUVUX1ZBTFVFX0ZJTFRFUlxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbnNwcmVhZHNoZWV0RmlsdGVycy5jdXN0b21PcGVyYXRvciA9IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlcSAgOiBcImVxdWFsXCIsXG4gICAgICAgIGd0ICA6IFwiZ3JlYXRlclRoYW5cIixcbiAgICAgICAgZ3RlIDogXCJncmVhdGVyVGhhbk9yRXF1YWxcIixcbiAgICAgICAgbHQgIDogXCJsZXNzVGhhblwiLFxuICAgICAgICBsdGUgOiBcImxlc3NUaGFuT3JFcXVhbFwiLFxuICAgICAgICBuZSAgOiBcIm5vdEVxdWFsXCIsXG5cbiAgICAgICAgLy8gVGhlc2UgYXJlIG5vdCBpbiB0aGUgc3BlYywgYnV0IHNlZW1zIHRvIGJlIGhvdyBFeGNlbCBkb2VzXG4gICAgICAgIC8vIGl0IChzZWUgY3VzdG9tVmFsdWUgYmVsb3cpLiAgRm9yIHRoZSBub24tbmVnYXRlZCB2ZXJzaW9ucyxcbiAgICAgICAgLy8gdGhlIG9wZXJhdG9yIGF0dHJpYnV0ZSBpcyBtaXNzaW5nIGNvbXBsZXRlbHkuXG4gICAgICAgIGRvZXNub3RzdGFydHdpdGg6IFwibm90RXF1YWxcIixcbiAgICAgICAgZG9lc25vdGVuZHdpdGg6IFwibm90RXF1YWxcIixcbiAgICAgICAgZG9lc25vdGNvbnRhaW46IFwibm90RXF1YWxcIixcbiAgICAgICAgZG9lc25vdG1hdGNoOiBcIm5vdEVxdWFsXCJcbiAgICB9W2Yub3BlcmF0b3IudG9Mb3dlckNhc2UoKV07XG59O1xuXG5zcHJlYWRzaGVldEZpbHRlcnMuY3VzdG9tVmFsdWUgPSBmdW5jdGlvbihmKSB7XG4gICAgZnVuY3Rpb24gZXNjKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbKj9dKS9nLCBcIn4kMVwiKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGYub3BlcmF0b3IudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlIFwic3RhcnRzd2l0aFwiOlxuICAgICAgICBjYXNlIFwiZG9lc25vdHN0YXJ0d2l0aFwiOlxuICAgICAgICAgICAgcmV0dXJuIGVzYyhmLnZhbHVlKSArIFwiKlwiO1xuXG4gICAgICAgIGNhc2UgXCJlbmRzd2l0aFwiOlxuICAgICAgICBjYXNlIFwiZG9lc25vdGVuZHdpdGhcIjpcbiAgICAgICAgICAgIHJldHVybiBcIipcIiArIGVzYyhmLnZhbHVlKTtcblxuICAgICAgICBjYXNlIFwiY29udGFpbnNcIjpcbiAgICAgICAgY2FzZSBcImRvZXNub3Rjb250YWluXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIqXCIgKyBlc2MoZi52YWx1ZSkgKyBcIipcIjtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGYudmFsdWU7XG4gICAgfVxufTtcblxuc3ByZWFkc2hlZXRGaWx0ZXJzLmR5bmFtaWNGaWx0ZXJUeXBlID0gZnVuY3Rpb24odHlwZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHF1YXJ0ZXIxICA6IFwiUTFcIixcbiAgICAgICAgcXVhcnRlcjIgIDogXCJRMlwiLFxuICAgICAgICBxdWFydGVyMyAgOiBcIlEzXCIsXG4gICAgICAgIHF1YXJ0ZXI0ICA6IFwiUTRcIixcbiAgICAgICAgamFudWFyeSAgIDogXCJNMVwiLFxuICAgICAgICBmZWJydWFyeSAgOiBcIk0yXCIsXG4gICAgICAgIG1hcmNoICAgICA6IFwiTTNcIixcbiAgICAgICAgYXByaWwgICAgIDogXCJNNFwiLFxuICAgICAgICBtYXkgICAgICAgOiBcIk01XCIsXG4gICAgICAgIGp1bmUgICAgICA6IFwiTTZcIixcbiAgICAgICAganVseSAgICAgIDogXCJNN1wiLFxuICAgICAgICBhdWd1c3QgICAgOiBcIk04XCIsXG4gICAgICAgIHNlcHRlbWJlciA6IFwiTTlcIixcbiAgICAgICAgb2N0b2JlciAgIDogXCJNMTBcIixcbiAgICAgICAgbm92ZW1iZXIgIDogXCJNMTFcIixcbiAgICAgICAgZGVjZW1iZXIgIDogXCJNMTJcIlxuICAgIH1bdHlwZS50b0xvd2VyQ2FzZSgpXSB8fCB0eXBlO1xufTtcblxuZXhwb3J0IHtcbiAgICBXb3JrYm9vayxcbiAgICBXb3Jrc2hlZXRc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